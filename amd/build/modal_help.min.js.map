{"version":3,"sources":["../src/modal_help.js"],"names":["SELECTORS","SEARCH","SEARCH_BUTTON","SEARCH_CLEAR","SUGGESTIONS","SUGGESTION_ITEM","TEMPLATES","MODAL_HELP_CONTENT","ModalHelp","root","courseId","currentUrl","topicList","topicIndex","minSearchScore","searchBox","modal","find","searchButton","searchClear","suggestionBox","suggestionItemIndex","getRoot","on","ModalEvents","shown","initContent","hidden","resetModal","e","target","hideSuggestionBox","val","showSearchClear","hideSearchClear","updateSearchBox","keyCode","KeyCodes","enter","getModal","focus","search","clearSearch","CustomEvents","events","activate","suggestionValue","attr","getPage","arrowUp","arrowLeft","preventDefault","getSuggestionItems","length","eq","arrowDown","arrowRight","ModalHelpAjax","getTopicList","getLandingPage","landingPage","renderPromise","Templates","render","html","topic","add","title","setBody","console","error","Notification","exception","searchValue","suggestions","get","values","Array","isArray","map","suggestion","suggestionMarkup","forEach","markup","append","showSuggestionBox","toLowerCase","url","substr","indexOf","getGuidePage","guidePage","topicName","removeClass","addClass","Modal","registered","ModalRegistry","register","getType"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Campus - ModalHelp class\n *\n * @package    theme_urcourses_default\n * @author     John Lane\n *\n */\n\nimport $ from 'jquery';\nimport Notification from 'core/notification';\nimport Templates from 'core/templates';\nimport CustomEvents from 'core/custom_interaction_events';\nimport KeyCodes from 'core/key_codes';\nimport Modal from 'core/modal';\nimport ModalEvents from 'core/modal_events';\nimport ModalRegistry from 'core/modal_registry';\nimport ModalHelpAjax from 'theme_urcourses_default/modal_help_ajax';\nimport {FuzzySet} from 'theme_urcourses_default/fuzzyset';\n\nconst SELECTORS = {\n    SEARCH: '#modal_help_search',\n    SEARCH_BUTTON: '#modal_help_search_btn',\n    SEARCH_CLEAR: '#modal_help_search_clear',\n    SUGGESTIONS: '#modal_help_search_suggestions',\n    SUGGESTION_ITEM: '.modal-help-suggestion-item',\n};\n\nconst TEMPLATES = {\n    MODAL_HELP_CONTENT: 'theme_urcourses_default/modal_help_content'\n};\n\n/**\n * Help modal for UR Courses.\n *\n * @class ModalHelp\n * @property {Number} courseId - ID of current course.\n * @property {String} currentUrl - Path of current page.\n * @property {Array} topicList - List of topcis for which there is help.\n * @property {FuzzySet} topicIndex - FuzzySet to enable fuzzy searching of topics.\n * @property {Number} minSearchScore - How similar a search has to be to attempt autocomplete.\n * @property {JQuery} searchBox - Search field jQuery element.\n * @property {JQuery} searchButton - Search button jQuery object.\n * @property {JQuery} searchClear - Clear search jQuery object.\n * @property {JQuery} suggestionBox - Suggestion box jQuery object.\n * @property {Number} suggestionItemIndex - Index of the suggestion currently selected by the keyboard.\n */\nexport default class ModalHelp extends Modal {\n\n    constructor(root) {\n        super(root);\n\n        this.courseId = null;\n        this.currentUrl = null;\n        this.topicList = null;\n        this.topicIndex = FuzzySet();\n        this.minSearchScore = 0;\n        this.searchBox = this.modal.find(SELECTORS.SEARCH);\n        this.searchButton = this.modal.find(SELECTORS.SEARCH_BUTTON);\n        this.searchClear = this.modal.find(SELECTORS.SEARCH_CLEAR);\n        this.suggestionBox = this.modal.find(SELECTORS.SUGGESTIONS);\n        this.suggestionItemIndex = 0;\n    }\n\n    /**\n     * Sets up courseId, currentUrl properties and registers events.\n     *\n     * @method init\n     * @param {Number} courseId The id of the current course.\n     * @param {String} currentUrl Current page's path.\n     */\n    init(courseId, currentUrl) {\n        this.courseId = courseId;\n        this.currentUrl = currentUrl;\n\n        this.getRoot().on(ModalEvents.shown, () => {\n            this.initContent();\n        });\n\n        this.getRoot().on(ModalEvents.hidden, () => {\n            this.resetModal();\n        });\n\n        // Hide suggestion box if user clicks elsewhere.\n        this.getRoot().on('click', (e) => {\n            if (e.target !== this.searchBox[0] && e.target !== this.suggestionBox[0]) {\n                this.hideSuggestionBox();\n            }\n        });\n\n        this.searchBox.on('input', () => {\n            if (this.searchBox.val()) {\n                this.showSearchClear();\n            }\n            else {\n                this.hideSearchClear();\n            }\n\n            this.updateSearchBox();\n        });\n\n        this.searchBox.on('focus', () => {\n            this.updateSearchBox();\n        });\n\n        // If user presses enter, remove focus from search box and perform search.\n        this.searchBox.on('keydown', (e) => {\n            if (e.keyCode === KeyCodes.enter) {\n                this.getModal().focus();\n                this.search();\n            }\n        });\n\n        this.searchClear.on('click', () => {\n            this.clearSearch();\n        });\n\n        this.searchButton.on('click', () => {\n            this.search();\n        });\n\n        this.suggestionBox.on(CustomEvents.events.activate, SELECTORS.SUGGESTION_ITEM, (e) => {\n            const suggestionValue = $(e.target).attr('data-value');\n            this.searchBox.val(suggestionValue);\n            this.showSearchClear();\n            this.getPage(suggestionValue);\n        });\n\n        // Keyboard controls.\n        this.searchBox.on('keydown', (e) => {\n            if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionItemIndex = this.getSuggestionItems().length - 1;\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n            else if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionItemIndex = 0;\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n        });\n\n        this.suggestionBox.on('keydown', SELECTORS.SUGGESTION_ITEM, (e) => {\n            if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionItemIndex--;\n                if (this.suggestionItemIndex < 0) {\n                    this.suggestionItemIndex = this.getSuggestionItems().length - 1;\n                }\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n            else if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionItemIndex++;\n                if (this.suggestionItemIndex >= this.getSuggestionItems().length) {\n                    this.suggestionItemIndex = 0;\n                }\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n        });\n\n    }\n\n    async initContent() {\n        try {\n            const topicList = await ModalHelpAjax.getTopicList(this.courseId);\n            const landingPage = await ModalHelpAjax.getLandingPage(this.courseId, this.currentUrl);\n            const renderPromise = Templates.render(TEMPLATES.MODAL_HELP_CONTENT, {html: landingPage.html});\n\n            this.topicList = topicList;\n            for (const topic of topicList) {\n                this.topicIndex.add(topic.title);\n            }\n\n            this.setBody(renderPromise);\n        }\n        catch(error) {\n            console.error('error', error);\n            Notification.exception(error);\n        }\n    }\n\n    resetModal() {\n        this.setBody('');\n        this.searchBox.val('');\n        this.suggestionBox.html('');\n    }\n\n    updateSearchBox() {\n        const searchValue = this.searchBox.val();\n        const topicIndex = this.topicIndex;\n        const suggestionBox = this.suggestionBox;\n\n        let suggestions = topicIndex.get(searchValue, topicIndex.values(), this.minSearchScore);\n        if (Array.isArray(suggestions[0])) {\n            suggestions = suggestions.map(suggestion => suggestion[1]);\n        }\n\n        this.suggestionBox.html('');\n        const suggestionMarkup = suggestions.map((suggestion) => {\n            return `<a href=\"#\" class=\"modal-help-suggestion-item\" data-value=\"${suggestion}\">${suggestion}</a>`;\n        });\n        suggestionMarkup.forEach(markup => suggestionBox.append(markup));\n\n\n        this.showSuggestionBox();\n    }\n\n    clearSearch() {\n        this.searchBox.val('');\n        this.hideSearchClear();\n    }\n\n    async search() {\n        const searchValue = this.searchBox.val();\n        const topic = this.topicList.find(topic => topic.title.toLowerCase() === searchValue.toLowerCase());\n        const url = topic.url.substr(topic.url.indexOf('/', 1));\n\n        if (!searchValue) {\n            return;\n        }\n\n        try {\n            const guidePage = await ModalHelpAjax.getGuidePage(url);\n            const renderPromise = Templates.render(TEMPLATES.MODAL_HELP_CONTENT, {html: guidePage.html});\n            this.hideSuggestionBox();\n            this.setBody(renderPromise);\n        }\n        catch (error) {\n            console.error('error', error);\n            Notification.exception(error);\n        }\n    }\n\n    async getPage(topicName) {\n        const topic = this.topicList.find(topic => topic.title.toLowerCase() === topicName.toLowerCase());\n        const url = topic.url.substr(topic.url.indexOf('/', 1));\n        try {\n            const guidePage = await ModalHelpAjax.getGuidePage(url);\n            const renderPromise = Templates.render(TEMPLATES.MODAL_HELP_CONTENT, {html: guidePage.html, title: guidePage.title});\n            this.setBody(renderPromise);\n        }\n        catch (error) {\n            console.error('error', error);\n            Notification.exception(error);\n        }\n    }\n\n\n    showSuggestionBox() {\n        this.suggestionBox.removeClass('d-none');\n    }\n\n    hideSuggestionBox() {\n        this.suggestionBox.addClass('d-none');\n    }\n\n    showSearchClear() {\n        this.searchClear.removeClass('d-none');\n    }\n\n    hideSearchClear() {\n        this.searchClear.addClass('d-none');\n    }\n\n    static getType() {\n        return 'theme_urcourses_default-help';\n    }\n\n    getSuggestionItems() {\n        return this.suggestionBox.find(SELECTORS.SUGGESTION_ITEM);\n    }\n\n}\n\n// Setup code for adding ModalHelp to the modal factory.\nlet registered = false;\nif (!registered) {\n    ModalRegistry.register(ModalHelp.getType(), ModalHelp, 'theme_urcourses_default/modal_help');\n    registered = true;\n}\n"],"file":"modal_help.min.js"}