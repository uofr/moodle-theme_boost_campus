{"version":3,"sources":["../src/course_enrolment.js"],"names":["define","$","ajax","notification","str","ModalFactory","ModalEvents","courseActionsLib","_root","_course","_element","_semester","_semesterdates","_categories","_templatelist","SELECTORS","HEADER","HEADER_TOP","BTN_COURSEENROL","BTN_ENROLTERM","STARTHOLDER","ENDHOLDER","STARTDAY","STARTMONTH","STARTYEAR","STARTHOUR","STARTMINUTE","ENDDAY","ENDMONTH","ENDYEAR","ENDHOUR","ENDMINUTE","ENDENABLE","ERR_START","ERR_END","TEMPLATES","MODAL_COURSE_ACTION_CONTENT","_setGlobals","root","course","semesterdates","categories","templatelist","id","coursename","shortname","startdate","enddate","_registerEventListeners","on","_getEnrolInfo","_registerSelectorEventListeners","bind","_setActiveTemplate","_registerModalButtons","_courseAction","_registerDeleteButtons","_deleteEnrollment","attr","args","courseid","semester","promise","call","methodname","done","response","_populateModal","fail","exception","e","templateHolder","hasClass","removeClass","find","addClass","data","modaltitle","activatedlist","activatedtitle","isavailable","isavaliable","output","courseinfo","length","each","key","value","crn","subject","section","activated","urid","fullname","create","type","types","SAVE_CANCEL","CANCEL","title","body","then","modal","setSaveButtonText","getRoot","cancel","save","selectedTemplates","preventDefault","text","show","templateids","i","push","groupcheck","prop","console","log","_addEnrolmentDateConfirm","hidden","remove","self","render","template","validate","_addEnrolment","Date","getFullYear","getMonth","getDate","jQuery","index","item","starttemp","split","endtemp","populateDateSelects","registerDateEventListeners","startday","val","startmonth","startyear","endyear","endday","endmonth","test","getTime","is","starthour","startminute","endhour","endminute","crns","ajaxCall","result","info","messageHolder","coursereqAction","category","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Campus - Code for course header image uploader.\n *\n * @package    theme_urcourses_default\n * @author     Brooke Clary\n * \n */\n\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/str',\n    'core/modal_factory', 'core/modal_events','theme_urcourses_default/course_actions'], function($, ajax, notification, str, ModalFactory, ModalEvents,courseActionsLib) {\n\n    /** Container jquery object. */\n    var _root;\n    /** Course ID */\n    var _course;\n    var _element;\n    var _semester;\n    var _semesterdates;\n    var _categories;\n    var _templatelist;\n\n    /** Jquery selector strings. */\n    var SELECTORS = {\n        HEADER: '#page-header .header-body',\n        HEADER_TOP: \"#page-header .page-head\",\n        BTN_COURSEENROL: '#btn_courseenrol',\n        BTN_ENROLTERM: '.btn_enrolterm',\n        STARTHOLDER: '#course_tools_startholder',\n        ENDHOLDER: '#course_tools_endholder',\n        STARTDAY: '#course_tools_start_day',\n        STARTMONTH: '#course_tools_start_month',\n        STARTYEAR: '#course_tools_start_year',\n        STARTHOUR: '#course_tools_start_hour',\n        STARTMINUTE: '#course_tools_start_minute',\n        ENDDAY: '#course_tools_end_day',\n        ENDMONTH: '#course_tools_end_month',\n        ENDYEAR: '#course_tools_end_year',\n        ENDHOUR: '#course_tools_end_hour',\n        ENDMINUTE: '#course_tools_end_minute',\n        ENDENABLE: '#course_tools_enddate_enabled',\n        ERR_START: '#error_course_tools_start',\n        ERR_END: '#error_course_tools_end',\n    };\n    const TEMPLATES = {\n        MODAL_COURSE_ACTION_CONTENT: 'theme_urcourses_default/modal_course_action_date'\n    };\n\n    /**\n     * Initializes global variables.\n     * @param {string} root - Jquery selector for container.\n     * @param {int} headerstyle - selected header style.\n     * @param {int} courseid - ID of current course.\n     * @return void\n     */\n    var _setGlobals = function(root, course,semesterdates,categories,templatelist) {\n       _root = $(root);\n       _course = course;\n       _semesterdates = semesterdates;\n       _categories = categories;\n       _templatelist = templatelist;\n\n       courseActionsLib = new courseActionsLib(_course.id,_course.coursename, _course.shortname, _course.startdate, _course.enddate, _templatelist,_categories);\n\n    };\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerEventListeners = function() {\n        _root.on('click', SELECTORS.BTN_ENROLTERM, _getEnrolInfo);\n    };\n     /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerSelectorEventListeners = function(_element) {\n        //set event listners for template options\n        $('.tmpl-label').bind('click', function() { _setActiveTemplate($(this)) } );   \n    } \n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerModalButtons = function() {\n        //set event listners for template options\n        $('#btn_duplicatemodal').bind('click', function() { _courseAction($(this)) } );   \n        $('#btn_newmodal').bind('click', function() { _courseAction($(this)) } );   \n    }  \n    \n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerDeleteButtons = function() {\n        //set event listners for template options\n        $('button[data-role=\"delete_button\"').bind('click', function() { _deleteEnrollment($(this)); } );\n    }\n\n     /**\n     * Initiate ajax call to get enrollment info \n     * to create modal with choices\n     */\n    var _getEnrolInfo = function() {\n\n        _element = $(this);\n        _semester = _element.attr('id');\n\n        // return if required values aren't set\n        if (!_course.id) {\n            return;\n        }\n        // set args\n        var args = {\n            courseid: _course.id,\n            semester: _semester\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_enrollment_info',\n            args: args\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            _populateModal(response);\n        }).fail(function(ex) {\n            notification.exception;\n        });\t\n    }\n\n    /**\n    * Switch choosen template based on click in template list\n    */\n    var _setActiveTemplate = function(e) {\n\n        templateHolder = $('div[data-role=\"templateholder\"');\n        //on click check if already active\n        if(e.hasClass(\"active\")){\n            //remove active class\n            e.removeClass(\"active\");\n            //and uncheck checkbox\n            e.find(\".fa-check-square-o\").addClass(\"fa-square-o\");\n            e.find(\".fa-square-o\").removeClass(\"fa-check-square-o\");\n        }else{\n            //add active class\n            e.addClass(\"active\");\n            //and check checkbox\n            e.find(\".fa-square-o\").addClass(\"fa-check-square-o\");\n            e.find(\".fa-check-square-o\").removeClass(\"fa-square-o\");\n        }\n    };\n    \n    /**\n     * Handles ajax return and response to create modal with options\n     * @param {Object} response \n     */\n    var _populateModal = function(data) {\n\n        // create modal with current selection as header\n        var modaltitle = 'Modify enrolment for '+data.semester;\n            \n        activatedlist = \"\";\n        activatedtitle = \"\";\n        isavailable = data.isavaliable\n\n        if(isavailable ==false){\n\n            //spinner incase one is clicked\n            output = '<div class=\"d-flex justify-content-center\">'\n                    +'<div id= \"mainspinner\" class=\"spinner-border \" role=\"status\"style=\"display: none;\" >'\n                    +'<span class=\"sr-only\">Loading...</span>'\n                    +'</div>'\n                    +'</div>'\n                    +'<div id=\"infoholder\" class=\"\">';\n\n            //We want an alert saying this course was activate in semester ...\n            output += '<div class=\"alert alert-warning\" role=\"alert\">'\n                    +'This course was used in a different semester. Please choose one of the '\n                    +'following options:'\n                    +'</div>';\n\n            //Duplicate this course? \n            output +=//'<div data-role=\"templateholder\" '\n                    '<button class=\"btn btn-secondary\" id=\"btn_duplicatemodal\" type=\"button\">'\n                    +'<i class=\"fa fa-files-o\" aria-hidden=\"true\"></i>'\n                    +'Duplicate this course'\n                    +'</button>';\n            //or\n            //create new course?\n            output += '<button class=\"btn btn-secondary\" id=\"btn_newmodal\"style=\"float: right;\" type=\"button\">'\n                    +'<i class=\"fa fa-plus\" aria-hidden=\"true\"></i> '\n                    +'Create blank course'  \n                    + '</button> </div></div>';\n\n        }else{\n            templatelist = '<div class=\"form-control-feedback invalid-feedback\" id=\"error_course_tools_section\">'\n                            +'</div> <div data-role=\"templateholder\" class = \"list-group\" >';\n            //check if any data exists\n            if(data.courseinfo.length !=0){\n\n                /*if(data.courseinfo.length>6){\n    \n                    templatelist += '<label  class=\"col-form-label d-inline \" for=\"bannerselect\">Select Banner Section:</label><br> ';\n                    templatelist += '<div class=\"form-control-feedback invalid-feedback\" id=\"error_bannerselect\"></div> ';\n                    templatelist += '<select class=\"custom-select\" id=\"bannerselect\" ';\n               \n                    $.each( data.courseinfo, function( key, value ) {  \n                        templatelist+= '<option value = ' +value.subject + ' ' +value.course + '-' + value.section +'>' +value.subject + ' ' +value.course + '-' + value.section +' </option>';  \n                    });\n                    templatelist += '</select>';\n    \n                }else{*/\n                    //special clicking list\n                    $.each( data.courseinfo, function( key, value ) {\n                            templatelist += '<div data-role = \"bannerselect\" class=\"tmpl-label list-group-item list-group-item-action \" id = '+value.crn+'>'+\n                                        '<h6><i class=\"fa fa-square-o\" aria-hidden=\"true\"></i>  '+\n                                        value.subject + ' ' +value.course + '-' + value.section +'</h6>'+\n                                        '</div>';\n                    });\n\n                    //add group division checkbox\n                    templatelist += '<br><div class=\"form-check\">'\n                                    +'<input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"course_tools_groups\">'\n                                    +'<label class=\"form-check-label\" for=\"course_tools_groups\">'\n                                    +' Create groups for each section'\n                                    +' </label>'\n                                    +' </div>';\n                //}\n            }else{\n                // else not error message\n                //add default template option even if there is no template category\n                templatelist += '<div data-role = \"templateselect\" class=\"tmpl-label list-group-item list-group-item-action active\" id = \"0\" >'+\n                '<p>There are no available Banner Sections for this course </p>'+\n                '</div>';\n            }\n\n            if(data.activated.length !=0){\n                activatedtitle = \"<small>The following Banner sections are already enrolled for the selected term:</small>\";\n                activatedlist += '<div class=\"list-group\">';\n                $.each( data.activated, function( key, value ) {\n                    activatedlist +='<div class=\"list-group-item list-group-item-secondary\">'+\n                    '<button data-role=\"delete_button\" type=\"button\" class=\"btn btn-primary float-right\" id=\"delete_'+value.crn+'_'+value.urid+'\">Delete Enrolment</button>'+\n                                    '<h6>'+value.subject + ' ' +value.course + '-' + value.section + '<br>'+\n                                    'enrolled into '+ value.fullname+'</h6>'+\n                                    '</div>';\n                });\n    \n                activatedlist += '</div><br>';\n            }\n\n            templatelist += '</div>';\n        }\n      \n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: (data.courseinfo.length != 0) ? ModalFactory.types.SAVE_CANCEL :ModalFactory.types.CANCEL ,\n            title: modaltitle,\n            body: ((isavailable) ? \"<p><b>Are you sure you want to modify enrolment for this course?</b><br />\"\n                    + \"<small>The following CRNs are available for the selected term:</small>\"\n                   + templatelist\n                   +\"</br>\"\n                   + activatedtitle \n                    + activatedlist \n                   + \"</p>\" : output )\n\n        }).then(function(modal) {\n\n            if(isavailable && data.courseinfo.length != 0){\n                modal.setSaveButtonText('Save');\n                var root = modal.getRoot();\n                root.on(ModalEvents.cancel, function(){\n                    return;\n                });\n                    \n                root.on(ModalEvents.save, function(e){\n\n                    //if(data.courseinfo.length>6){\n                       // templateid = $('#bannerselect').val();\n                    //}else{\n                        templateHolder = $('div[data-role=\"templateholder\"');\n                        selectedTemplates = $(templateHolder).find('.active');\n                        //no selected template error\n                        if(selectedTemplates.length <=0){\n                            e.preventDefault(); \n                            $(\"#error_course_tools_section\").text(\"Please select a banner section\");\n                            $(\"#error_course_tools_section\").attr(\"display\", \"block\");\n                            $(\"#error_course_tools_section\").show();\n                         \n                        }else{\n                            var templateids = [];\n                            for(var i = 0; i<selectedTemplates.length; i++){\n                                //templateids.push( {\"crn\": $(selectedTemplates[i]).attr('id')});\n                                templateids.push( {\"crn\": $(selectedTemplates[i]).attr('id')});\n                            }\n                            \n                            var groupcheck = $(\"#course_tools_groups\").prop(\"checked\") \n\n                            console.log(\"groupcheck 1\");\n                            console.log(groupcheck);\n                            _addEnrolmentDateConfirm(data.courseinfo, templateids, groupcheck,data.semester); \n                        }\n                    //}\n                     \n                });\n            }else{\n                var root = modal.getRoot();\n                root.on(ModalEvents.cancel, function(){\n                    return;\n                });\n            }\n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(e){\n                //remove inputs otherwise duplicates are made causing id problems\n                $( \"div[data-role='templateholder']\" ).remove();\n            });\n            modal.show();\n        }).done(function(modal) {\n            if(isavailable){\n                if(/*data.courseinfo.length<=6 && */data.courseinfo.length>0 ){\n                    _registerSelectorEventListeners(_element);\n                }\n                \n            }else{\n                _registerModalButtons();\n            }\n            if(data.activated.length !=0){\n                _registerDeleteButtons();\n\n            }\n        });\n    };\n\n    /**\n     * Handles ajax return and response to create modal with options\n     * @param {Object} response \n     */\n    var _addEnrolmentDateConfirm = async function(data, templateids,groupcheck, semester) {\n\n        // create modal with current selection as header\n        var modaltitle = 'Change course dates to: ';\n        var template =  await self.render(TEMPLATES.MODAL_COURSE_ACTION_CONTENT);\n      \n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: (\"<p><b>Confirm Date change?</b><br />\"+template )\n\n        }).then(function(modal) {\n\n                modal.setSaveButtonText('Save');\n                var root = modal.getRoot();\n                root.on(ModalEvents.cancel, function(){\n                    return;\n                });\n                    \n                root.on(ModalEvents.save, function(e){\n\n                    if(!validate()){\n                        e.preventDefault();   \n                    }else{\n                        _addEnrolment(data, templateids,groupcheck); \n                    }     \n                });\n            \n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(e){\n                //remove inputs otherwise duplicates are made causing id problems\n                $( SELECTORS.ENDHOLDER).remove();\n                $( SELECTORS.STARTHOLDER).remove();\n            });\n            modal.show();\n        }).done(function(modal) {\n            \n            var startdate = {\"year\": (new Date()).getFullYear(), \"mon\": (new Date()).getMonth(),\"mday\":(new Date()).getDate()};\n            var enddate = {\"year\": (new Date()).getFullYear() +1, \"mon\": (new Date()).getMonth(),\"mday\":(new Date()).getDate()};\n\n            jQuery.each(_semesterdates, function(index, item) {\n                if(index == _semester){\n                    var starttemp = item.startdate.split(\"-\");\n                    var endtemp = item.enddate.split(\"-\");\n\n                    startdate = {\"year\": starttemp[2], \"mon\": starttemp[1],\"mday\":starttemp[0]};\n                    enddate = {\"year\": endtemp[2], \"mon\": endtemp[1],\"mday\":endtemp[0]};\n                }\n            });\n\n            courseActionsLib.populateDateSelects(startdate,enddate);  \n            courseActionsLib.registerDateEventListeners(_element);\n\n        });\n    };\n    /**\n     * For Duplicate and Create course.\n     * Validate if course name and shortname have been entered\n     */\n    var validate = function() {\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n   \n        var test =true; \n        \n        var startdate = new Date(startyear+\".\"+startmonth+\".\"+startday).getTime()/1000;\n        var enddate = new Date(endyear+\".\"+endmonth+\".\"+endday).getTime()/1000;\n      \n        if(enddate < startdate && $(SELECTORS.ENDENABLE).is(\":checked\") ){\n            $(SELECTORS.ERR_START).text(\"Course end date can not be before start date\");\n            $(SELECTORS.ERR_START).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_START).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_START).text(\"\");\n            $(SELECTORS.ERR_END).text(\"\");\n        }\n\n        return test;\n    }\n    \n    /**\n     * After modal info has been entered call ajax request\n     */\n    var _addEnrolment = function(courseinfo, templateids, groupcheck) {\n\n        // return if required values aren't set\n        if (!_course.id) {\n            return;\n        }\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n        var enddate = \"0\";\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n\n        console.log(\"groupcheck 2\");\n        console.log(groupcheck);\n\n        if(groupcheck == \"\" || groupcheck == false){\n            groupcheck = 0;\n\n        }else{\n            groupcheck = 1;\n        }\n\n        console.log(\"groupcheck 3\");\n        console.log(groupcheck);\n\n        // set args\n        var args = {\n            courseid: _course.id,\n            semester: _semester,\n            crns: templateids, \n            groupcheck: groupcheck,   \n            startdate: startdate,\n            enddate: enddate\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_activate_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n                \n            if(response.result!=\"\"){\n                title = \"Response:\"\n                info = response.result;\n            }\n            //enrollment was a success\n            if(response.value){\n                messageHolder = $('#enrollment_span');\n                messageHolder.text(\"Enrolment: \"+response.semester);\n            }\n                    \n            ModalFactory.create({\n                title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n            }).done(function(modal) {\n                modal.show();\n            });\n\n        }).fail(function(ex) {\n            notification.exception;\n        });  \n        \n    };\n    \n    /**\n     * After modal info has been entered call ajax request\n     */\n    var _deleteEnrollment = function(e) {\n        \n        var crn = e.attr('id').split(\"_\");\n\n        console.log(\"made it\");\n        console.log(crn);\n        console.log(_semester);\n\n        // set args\n        var args = {\n            courseid:crn[2],\n            semester: _semester,\n            crn: crn[1], \n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_delete_enrollment',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n\n            //2nd popup saying enrolment removed with filled in names from element\n\n            //remove from activated list\n            //add to available list\n\n\n\n\n\n\n\n\n\n\n                \n            if(response.result!=\"\"){\n                title = \"Response:\"\n                info = response.result;\n            }\n            //enrollment was a success\n            if(response.value){\n                messageHolder = $('#enrollment_span');\n                messageHolder.text(\"Enrolment: \"+response.semester);\n            }\n                    \n            ModalFactory.create({\n                title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n            }).done(function(modal) {\n                modal.show();\n            });\n\n        }).fail(function(ex) {\n            notification.exception;\n        });  \n        \n    };\n\n    var _courseAction = function(e) {\n\n        var button = \"btn_newmodal\";\n        var startdate = {\"year\": (new Date()).getFullYear(), \"mon\": (new Date()).getMonth(),\"mday\":(new Date()).getDate()};\n        var enddate = {\"year\": (new Date()).getFullYear() +1, \"mon\": (new Date()).getMonth(),\"mday\":(new Date()).getDate()};\n\n        jQuery.each(_semesterdates, function(index, item) {\n            if(index == _semester){\n                var starttemp = item.startdate.split(\"-\");\n                var endtemp = item.enddate.split(\"-\");\n\n                startdate = {\"year\": starttemp[2], \"mon\": starttemp[1],\"mday\":starttemp[0]};\n                enddate = {\"year\": endtemp[2], \"mon\": endtemp[1],\"mday\":endtemp[0]};\n            }\n        });\n\n        courseActionsLib.coursereqAction(e, button, _course.category, startdate, enddate);\n    }\n\n\n\n    /**\n     * Entry point to module. Sets globals and registers event listeners.\n     * @param {String} root Jquery selector for container.\n     * @return void\n     */\n    var init = function(root, course, semesterdates,categories, templatelist) {\n        _setGlobals(root, course, semesterdates,categories,templatelist);\n        _registerEventListeners();\n    };\n\n    return {\n        init: init\n    };\n});"],"file":"course_enrolment.min.js"}