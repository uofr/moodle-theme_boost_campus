{"version":3,"sources":["../src/course_enrolment.js"],"names":["define","$","ajax","notification","str","ModalFactory","ModalEvents","_root","_courseid","_coursename","_shortname","_element","_semester","SELECTORS","HEADER","HEADER_TOP","BTN_COURSEENROL","BTN_ENROLTERM","_setGlobals","root","courseid","coursename","shortname","_registerEventListeners","on","_getEnrolInfo","_registerSelectorEventListeners","bind","_setActiveTemplate","_registerModalButtons","_coursereqAction","attr","args","semester","promise","call","methodname","done","response","_populateModal","fail","exception","e","templateHolder","find","removeClass","addClass","data","modaltitle","activatedlist","activatedtitle","isavailable","isavaliable","output","activated","length","each","key","value","subject","course","section","templatelist","courseinfo","count","crn","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","getRoot","cancel","save","_addEnrolment","hidden","remove","show","templateid","val","selectedTemplate","ajaxCall","result","info","messageHolder","text","modalaction","templatenew","_templatelist","id","fullname","summary","templatebase","_categories","name","templateduplicate","_validate","preventDefault","_createCourse","_duplicateCourse","error_coursename","error_shortname","test","categoryid","hide","error","url","window","location","href","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Campus - Code for course header image uploader.\n *\n * @package    theme_urcourses_default\n * @author     Brooke Clary\n * \n */\n\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/str',\n    'core/modal_factory', 'core/modal_events'], function($, ajax, notification, str, ModalFactory, ModalEvents) {\n\n    /** Container jquery object. */\n    var _root;\n    /** Course ID */\n    var _courseid;\n    var _coursename;\n    var _shortname;\n    var _element;\n    var _semester;\n\n    /** Jquery selector strings. */\n    var SELECTORS = {\n        HEADER: '#page-header .header-body',\n        HEADER_TOP: \"#page-header .page-head\",\n        BTN_COURSEENROL: '#btn_courseenrol',\n        BTN_ENROLTERM: '.btn_enrolterm',\n    };\n\n    /**\n     * Initializes global variables.\n     * @param {string} root - Jquery selector for container.\n     * @param {int} headerstyle - selected header style.\n     * @param {int} courseid - ID of current course.\n     * @return void\n     */\n    var _setGlobals = function(root, courseid, coursename, shortname) {\n       _root = $(root);\n       _courseid = courseid;\n       _coursename = coursename;\n       _shortname = shortname;\n    };\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerEventListeners = function() {\n        _root.on('click', SELECTORS.BTN_ENROLTERM, _getEnrolInfo);\n    };\n     /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerSelectorEventListeners = function(_element) {\n        //set event listners for template options\n        $('.tmpl-label').bind('click', function() { _setActiveTemplate($(this)) } );   \n    } \n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerModalButtons = function() {\n        //set event listners for template options\n        $('#btn_duplicatemodal').bind('click', function() { _coursereqAction($(this)) } );   \n        $('#btn_newmodal').bind('click', function() { _coursereqAction($(this)) } );   \n    }\n\n     /**\n     * Initiate ajax call to get enrollment info \n     * to create modal with choices\n     */\n    var _getEnrolInfo = function() {\n\n        _element = $(this);\n        _semester = _element.attr('id');\n\n        // return if required values aren't set\n        if (!_courseid) {\n            return;\n        }\n        // set args\n        var args = {\n            courseid: _courseid,\n            semester: _semester\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_enrollment_info',\n            args: args\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            _populateModal(response);\n        }).fail(function(ex) {\n            notification.exception;\n        });\t\n    }\n\n    /**\n    * Switch choosen template based on click in template list\n    */\n    var _setActiveTemplate = function(e) {\n\n        templateHolder = $('div[data-role=\"templateholder\"');\n        $(templateHolder).find('.active').removeClass(\"active\");\n        e.addClass(\"active\");\n    };\n    \n    /**\n     * Handles ajax return and response to create modal with options\n     * @param {Object} response \n     */\n    var _populateModal = function(data) {\n\n        // create modal with current selection as header\n        var modaltitle = 'Modify enrolment for '+data.semester;\n            \n        activatedlist = \"\";\n        activatedtitle = \"\";\n        isavailable = data.isavaliable\n\n        if(isavailable ==false){\n\n            //spinner incase one is clicked\n            output = '<div class=\"d-flex justify-content-center\">'\n                    +'<div id= \"mainspinner\" class=\"spinner-border \" role=\"status\"style=\"display: none;\" >'\n                    +'<span class=\"sr-only\">Loading...</span>'\n                    +'</div>'\n                    +'</div>'\n                    +'<div id=\"infoholder\" class=\"\">';\n\n            //We want an alert saying this course was activate in semester ...\n            output += '<div class=\"alert alert-warning\" role=\"alert\">'\n                    +'This course was used in a different semester. Please choose one of the '\n                    +'following options:'\n                    +'</div>';\n\n            //Duplicate this course? \n            output +=//'<div data-role=\"templateholder\" '\n                    '<button class=\"btn btn-secondary\" id=\"btn_duplicatemodal\" type=\"button\">'\n                    +'<i class=\"fa fa-files-o\" aria-hidden=\"true\"></i>'\n                    +'Duplicate this course'\n                    +'</button>';\n            //or\n            //create new course?\n            output += '<button class=\"btn btn-secondary\" id=\"btn_newmodal\"style=\"float: right;\" type=\"button\">'\n                    +'<i class=\"fa fa-plus\" aria-hidden=\"true\"></i> '\n                    +'Create blank course'  \n                    + '</button> </div></div>';\n\n        }else{\n\n            if(data.activated.length !=0){\n                activatedtitle = \"<small>The following Banner sections are already enrolled for the selected term:</small>\";\n                activatedlist += '<div class=\"list-group\">';\n                $.each( data.activated, function( key, value ) {\n                    activatedlist += '<div class=\"list-group-item list-group-item-secondary\">'+\n                                    '<h6>'+value.subject + ' ' +value.course + '-' + value.section +'</h6>'+\n                                    '</div>';\n                });\n    \n                activatedlist += '</div><br>';\n            }\n    \n            templatelist = '<div data-role=\"templateholder\" class = \"list-group\" >';\n            //check if any data exists\n            if(data.courseinfo.length !=0){\n\n                if(data.courseinfo.length>6){\n    \n                    templatelist += '<label  class=\"col-form-label d-inline \" for=\"bannerselect\">Select Banner Section:</label><br> ';\n                    templatelist += '<div class=\"form-control-feedback invalid-feedback\" id=\"error_bannerselect\"></div> ';\n                    templatelist += '<select class=\"custom-select\" id=\"bannerselect\" ';\n               \n                    $.each( data.courseinfo, function( key, value ) {\n                        \n                        templatelist+= '<option value = ' +value.subject + ' ' +value.course + '-' + value.section +'</option>';\n                       \n                    });\n                    templatelist += '</select>';\n    \n                }else{\n                    //special clicking list\n                    count=1;\n                    $.each( data.courseinfo, function( key, value ) {\n                        if(count==1){\n                        templatelist += '<div data-role = \"bannerselect\" class=\"tmpl-label list-group-item list-group-item-action active\" id = '+value.crn+'>'+\n                                        '<h6>'+value.subject + ' ' +value.course + '-' + value.section +'</h6>'+\n                                        '</div>';\n                        }else{\n                            templatelist += '<div data-role = \"bannerselect\" class=\"tmpl-label list-group-item list-group-item-action \" id = '+value.crn+'>'+\n                                        '<h6>'+value.subject + ' ' +value.course + '-' + value.section +'</h6>'+\n                                        '</div>';\n                        }\n                        count++;\n                    });\n                }\n            }else{\n                // else not error message\n                //add default template option even if there is no template category\n                templatelist += '<div data-role = \"templateselect\" class=\"tmpl-label list-group-item list-group-item-action active\" id = \"0\" >'+\n                '<p>There are no available Banner Sections for this course </p>'+\n                '</div>';\n            }\n            templatelist += '</div>';\n        }\n      \n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: ((isavailable) ? \"<p><b>Are you sure you want to modify enrolment for this course?</b><br />\"\n                    + activatedtitle \n                    + activatedlist \n                    + \"<small>The following CRNs are available for the selected term:</small>\"\n                   + templatelist\n                   + \"</p>\" : output )\n\n        }).then(function(modal) {\n\n            if(isavailable){\n                modal.setSaveButtonText('Save');\n                var root = modal.getRoot();\n                root.on(ModalEvents.cancel, function(){\n                    return;\n                });\n                    \n                root.on(ModalEvents.save, function(e){\n                    _addEnrolment(data.courseinfo);    \n                });\n            }else{\n                var root = modal.getRoot();\n                root.on(ModalEvents.cancel, function(){\n                    return;\n                });\n            }\n           \n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(e){\n                //remove inputs otherwise duplicates are made causing id problems\n                $( \"div[data-role='templateholder']\" ).remove();\n            });\n            modal.show();\n        }).done(function(modal) {\n            if(isavailable){\n                if(data.courseinfo.length<6 && data.courseinfo.length>0 ){\n                    _registerSelectorEventListeners(_element);\n                }\n            }else{\n                _registerModalButtons();\n            }\n        });\n    };\n    \n    /**\n     * After modal info has been entered call ajax request\n     */\n    var _addEnrolment = function(courseinfo) {\n        \n        // return if required values aren't set\n        if (!_courseid) {\n            return;\n        }\n        \n        if(courseinfo.length>6){\n            templateid = $('#bannerselect').val();\n        }else{\n            templateHolder = $('div[data-role=\"templateholder\"');\n            selectedTemplate = $(templateHolder).find('.active')\n            templateid = $(selectedTemplate).attr('id');\n        }\n\n        if(templateid !=0){\n            //duplicate course option selected\n            // set args\n            var args = {\n                courseid: _courseid,\n                semester: _semester,\n                crn: templateid,    \n            };\n\n            // set ajax call\n            var ajaxCall = {\n                methodname: 'theme_urcourses_default_header_activate_course',\n                args: args,\n                fail: notification.exception\n            };\n\n            // initiate ajax call\n            var promise = ajax.call([ajaxCall]);\n            promise[0].done(function(response) {\n                \n                if(response.result!=\"\"){\n                    title = \"Response:\"\n                    info = response.result;\n                }\n                //enrollment was a success\n                if(response.value){\n                    messageHolder = $('#enrollment_span');\n                    messageHolder.text(\"Enrolment: \"+response.semester);\n                }\n                    \n                ModalFactory.create({\n                        title: title,\n                        body: '<p><b>'+info+'</b><br></p>',\n                }).done(function(modal) {\n                    modal.show();\n                });\n\n            }).fail(function(ex) {\n                notification.exception;\n            });  \n        }\n    };\n\n     /**\n     * Used for new course and duplicate course creation on button clicks\n     */\n    var _coursereqAction = function(_element) {\n\n        var modaltitle = (_element.attr('id') == 'btn_newmodal') ? 'Create new course' : 'Duplicate this course';\n        var modalaction = (_element.attr('id') == 'btn_newmodal') ? 'create a new' : 'duplicate this';\n            \n        templatenew = '<div data-role=\"templateholder\" class = \"list-group\" >';\n        if(_templatelist !=0){\n\n            if(_templatelist.length>6){\n\n                templatenew += '<label  class=\"col-form-label d-inline \" for=\"templateselect\">Template Select:</label><br> ';\n                templatenew += '<div class=\"form-control-feedback invalid-feedback\" id=\"error_templateselect\"></div> ';\n                templatenew += '<select class=\"custom-select\" id=\"templateselect\" ';\n           \n                templatenew += '<option value = 0 > Default Blank Course</option>';\n                templatenew += '<option value = 0 > Default Blank Course</option>';\n                $.each( _templatelist, function( key, value ) {\n                    templatenew += '<option value = '+value.id+'>'+value.fullname +'</option>';\n                });\n                templatenew += '</select>';\n\n            }else{\n                $.each( _templatelist, function( key, value ) {\n                    templatenew += '<div data-role = \"templateselect\" class=\"tmpl-label list-group-item list-group-item-action \" id = '+value.id+'>'+\n                                    '<h6>'+value.fullname +'</h6>'+\n                                    '<p><small>'+value.summary+'</small></p>'+\n                                    '</div>';\n                });\n\n                //add default template option even if there is no template category\n                templatenew += '<div data-role = \"templateselect\" class=\"tmpl-label list-group-item list-group-item-action active\" id = \"0\" >'+\n                '<h6>Default Course</h6>'+\n                '<p><small>Basic course template. No activites included </small></p>'+\n                '</div>';\n            }\n        }else{\n\n            //add default template option even if there is no template category\n            templatenew += '<div data-role = \"templateselect\" class=\"tmpl-label list-group-item list-group-item-action active\" id = \"0\" >'+\n            '<h6>Default Course</h6>'+\n            '<p><small>Basic course template. No activites included </small></p>'+\n            '</div>';\n        }\n\n        templatebase = '</div>';\n        templatebase += '<br><br>'\n        templatebase += '<div class=\"form-control-feedback invalid-feedback\" id=\"error_coursename\"></div> ';\n        templatebase += '<label  class=\"col-form-label d-inline \" for=\"coursename\">Course Full Name:</label><input maxlength=\"254\" class=\"form-control \" type=\"text\" id=\"coursename\" name=\"coursename\"><br> ';\n        templatebase += '<div class=\"form-control-feedback invalid-feedback\" id=\"error_shortname\"></div> ';\n        templatebase += '<label class=\"col-form-label d-inline \" for=\"shortname\">Course Short Name:</label><input maxlength=\"254\" class=\"form-control \" type=\"text\" id=\"shortname\" name=\"shortname\"><br> ';\n\n\n        templatebase += '<label  class=\"col-form-label d-inline \" for=\"category\">Course Category:</label><br> ';\n        templatebase += '<div class=\"form-control-feedback invalid-feedback\" id=\"error_category\"></div> ';\n        templatebase += '<select class=\"custom-select\" id=\"category\" ';\n        if(_categories !=0){\n            $.each( _categories, function( key, value ) {\n                templatebase += '<option value = '+value.id+'>'+value.name +'</option>';\n            });\n        }\n        templatebase += '</select';\n\n        templatenew += templatebase;  \n        templateduplicate = templatebase;\n        \n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: \"<p><b>Are you sure you want to \"+ modalaction +\" course?</b><br />\"\n                + ((_element.attr('id') == 'btn_newmodal') ? \"<small>Select from the templates below:</small>\" : \"<small>Student data will not be included in the duplicated course.</small>\")\n                + ((_element.attr('id') == 'btn_newmodal') ? templatenew : '' )\n                + (!(_element.attr('id') == 'btn_newmodal') ? templateduplicate : '' )\n                + \"</p>\"\n        }).then(function(modal) {\n\n            modal.setSaveButtonText((_element.attr('id') == 'btn_newmodal') ? 'Create new course' : 'Duplicate this course');\n            var root = modal.getRoot();\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n                \n            if((_element.attr('id') == 'btn_newmodal')){\n                root.on(ModalEvents.save, function(e){\n                    if(!_validate()){\n                        e.preventDefault();   \n                    }else{\n                        _createCourse(_element.attr('id') );\n                    }    \n                });\n            }else{\n                root.on(ModalEvents.save, function(e){\n                    if(!_validate()){\n                        e.preventDefault();   \n                    }else{\n                        _duplicateCourse(_element.attr('id') );\n                    }\n                });\n            }\n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(e){\n                //remove inputs otherwise duplicates are made causing id problems\n                $( \"#coursename\" ).remove();\n                $( \"#shortname\" ).remove();\n                $( \"#category\" ).remove();\n            });\n\n            modal.show();\n        }).done(function(modal) {\n            if((_element.attr('id') == 'btn_newmodal')){\n                _registerSelectorEventListeners(_element);\n            }else{\n                $('#coursename').val(_coursename+\" (Copy)\");\n                $('#shortname').val(_shortname+\" (Copy)\");\n            }\n        });\n    };\n\n    /**\n     * Switch choosen template based on click in template list\n     */\n    var _setActiveTemplate = function(e) {\n\n        templateHolder = $('div[data-role=\"templateholder\"');\n        $(templateHolder).find('.active').removeClass(\"active\");\n        e.addClass(\"active\");\n    };\n\n    /**\n     * For Duplicate and Create course.\n     * Validate if course name and shortname have been entered\n     */\n    var _validate = function() {\n\n        coursename = $('#coursename').val();\n        shortname = $('#shortname').val();\n\n        error_coursename = $('#error_coursename');\n        error_shortname = $('#error_shortname');\n\n        var test =true; \n        if(coursename.length ==0){\n            $(error_coursename).text(\"Please enter a name for the course\");\n            $(error_coursename).attr(\"display\", \"block\");\n            $(error_coursename).show();\n            test = false;\n        }\n\n        if(shortname.length ==0){\n            $(error_shortname).text(\"Please enter a short name for the course\");\n            $(error_shortname).attr(\"display\", \"block\");\n            $(error_shortname).show();\n            test = false;\n        }\n\n        if(!test){\n            return false;\n        }\n        $(error_coursename).text(\"\");\n        $(error_shortname).text(\"\");\n        return true;\n    };\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    var _createCourse = function(elementid) {\n        \n        // return if required values aren't set\n        if (!_courseid) {\n            return;\n        }\n        \n        if(_templatelist.length>6){\n            templateid = $('#templateselect').val();\n        }else{\n            templateHolder = $('div[data-role=\"templateholder\"');\n            selectedTemplate = $(templateHolder).find('.active')\n            templateid = $(selectedTemplate).attr('id');\n        }\n\n        coursename = $('#coursename').val();\n        shortname = $('#shortname').val();\n        categoryid = $('#category').val();\n        $('#mainspinner') .show();\n        $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: _courseid,\n            templateid: templateid,    \n            coursename: coursename,\n            shortname: shortname,\n            categoryid: categoryid,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_create_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            $('#mainspinner') .hide();\n            $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            if(response.error!=\"\"){\n\n                title = \"ERROR:\"\n                info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                window.location.href = response.url;\n            }\n        }).fail(function(ex) {\n            notification.exception;\n        });  \n    };\n\n     /**\n     * After modal info has been entered call ajax request\n     */\n    var _duplicateCourse = function(elementid) {\n        \n        // return if required values aren't set\n        if (!_courseid) {\n            return;\n        }\n        coursename = $('#coursename').val();\n        shortname = $('#shortname').val();\n        categoryid = $('#category').val();\n\n        $('#mainspinner') .show();\n        $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: _courseid,\n            coursename: coursename,\n            shortname: shortname,\n            categoryid: categoryid,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_duplicate_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            $('#mainspinner') .hide();\n            $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            if(response.error!=\"\"){\n\n                title = \"ERROR:\"\n                info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                window.location.href = response.url;\n            }\n        }).fail(function(ex) {\n            notification.exception;\n        });  \n    };\n\n    /**\n     * Entry point to module. Sets globals and registers event listeners.\n     * @param {String} root Jquery selector for container.\n     * @return void\n     */\n    var init = function(root, courseid,coursename,shortname) {\n        _setGlobals(root, courseid,coursename,shortname);\n        _registerEventListeners();\n    };\n\n    return {\n        init: init\n    };\n\n});"],"file":"course_enrolment.min.js"}