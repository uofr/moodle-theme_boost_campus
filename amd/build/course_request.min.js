define ("theme_urcourses_default/course_request",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events","theme_urcourses_default/course_actions"],function(a,b,c,d,e,f,g){var h,i,j,k,l={HEADER:"#page-header .header-body",HEADER_TOP:"#page-header .page-head",BTN_COURSETOOLS:"#btn_coursetools",BTN_DUPLICATE:"#btn_duplicate",BTN_NEW:"#btn_new",BTN_STUDENT:"#btn_student",BTN_DESCRIPTION:"#btn_editdescription"},m=function(b,c,d,e){h=a(b);i=c;k=d;j=e;g=new g(i.id,i.coursename,i.shortname,i.startdate,i.enddate,k,j)},n=function(){h.on("click",l.BTN_COURSETOOLS,o);h.on("click",l.BTN_DUPLICATE,o);h.on("click",l.BTN_NEW,o);h.on("click",l.BTN_STUDENT,p);h.on("click",l.BTN_DESCRIPTION,s)},o=function(){var b=a(this);g.coursereqAction(b,"btn_new",i.category,i.startdate,i.enddate)},p=function(){var a=this.getAttribute("aria-username");e.create({type:e.types.SAVE_CANCEL,title:"Create and enroll test student account in course",body:"<p><b>Do you want to "+("create the test student account "+a+"+student@uregina.ca")+"?</b><br /></p>"}).then(function(b){b.setSaveButtonText("Create");var c=b.getRoot();c.on(f.cancel,function(){});c.on(f.save,function(){q(a)});b.show()})},q=function(a){if(!i.id){return}var d={courseid:i.id,username:a},e={methodname:"theme_urcourses_default_header_create_test_account",args:d,success:function success(a){r(a)},fail:c.exception},f=b.call([e]);f[0].done(function(a){r(a)}).fail(function(){c.exception})},r=function(b){title="Success: ";info="";action=" Would you like to logout, inorder to login to new account?";if(!1!=b.created&&!1!=b.enrolled){info=b.username+" was created and enrolled into this course. Login password is the same as current account."}else if(!1!=b.created&&!1==b.enrolled){info=b.username+" was created, but FAILED to be enrolled into this course"}else if(!1==b.created&&!1!=b.enrolled){info=b.username+" already existed, and has now been enrolled into this course. Login password is the same as current account."}else{title="ERROR:";info=b.username+" already exists and is enrolled into the course";e.create({title:title,body:"<p><b>"+info+"</b><br></p>"}).done(function(a){a.show()});return}e.create({type:e.types.SAVE_CANCEL,title:title,body:"<p><b>"+info+"</b><br>"+action+"<br /></p>"}).then(function(c){c.setSaveButtonText("Logout");var d=c.getRoot();d.on(f.cancel,function(){});d.on(f.save,function(){var c=a("a[data-title=\"logout,moodle\"]").attr("href");window.location.href=c;a("#username").value=b.username});c.show()})},s=function(){var a=window.location.href;a=a.substring(0,a.lastIndexOf("/"));var b=a+"/edit.php?id="+i.id+"#id_descriptionhdr";window.location.href=b},t=function(){var b=window.location.href;if(0<=b.indexOf("course/edit.php")){if(""!=window.location.hash){var c=a(".navbar").outerHeight();a("html, body").animate({scrollTop:a(window.location.hash).offset().top-c},2e3)}}};return{init:function init(a,b,c,d){m(a,b,c,d);n();t()}}});
//# sourceMappingURL=course_request.min.js.map
