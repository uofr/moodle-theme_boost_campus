{"version":3,"sources":["../src/course_actions.js"],"names":["TEMPLATES","MODAL_COURSE_ACTION_CONTENT","SELECTORS","COURSENAME","SHORTNAME","CATEGORY","MODALHOLDER","STARTDAY","STARTMONTH","STARTYEAR","STARTHOUR","STARTMINUTE","ENDDAY","ENDMONTH","ENDYEAR","ENDHOUR","ENDMINUTE","ENDENABLE","ERR_COURSENAME","ERR_SHORTNAME","ERR_CATEGORY","ERR_START","ERR_END","courseActionsLib","courseid","coursename","shortname","startdate","enddate","templatelist","categories","self","_courseid","_coursename","_shortname","_startdate","_enddate","_templatelist","_categories","_element","button","selectcatergory","selectstart","selectend","modaltitle","attr","modalaction","templatenew","istemplatelist","length","render","template","ModalFactory","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","on","ModalEvents","cancel","save","e","validate","preventDefault","createCourse","duplicateCourse","hidden","remove","show","done","registerSelectorEventListeners","val","populateDateSelects","registerDateEventListeners","currentyear","Date","getFullYear","year","append","monthNames","currentmonth","getMonth","month","mtemp","mon","currentday","getDate","day","mday","hour","minute","templateHolder","find","removeClass","addClass","checked","is","prop","startyear","endyear","startmonth","endmonth","startday","endday","actualStart","actualEnd","templateshort","$","each","key","push","id","fullname","summary","courseimage","name","renderData","Templates","renderPromise","bind","setActiveTemplate","showMoreInfo","setEnddate","validateDaysInMonth","test","text","getTime","course","split","DEFAULT","selectedTemplate","templateid","category","starthour","startminute","endhour","endminute","args","categoryid","ajaxCall","methodname","fail","notification","exception","promise","ajax","call","response","hide","error","info","url","window","location","href"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport ajax from 'core/ajax';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport notification from 'core/notification';\nimport Templates from 'core/templates';\n\nconst TEMPLATES = {\n    MODAL_COURSE_ACTION_CONTENT: 'theme_urcourses_default/modal_course_action_content'\n};\n\nconst SELECTORS = {\n    COURSENAME: '#course_tools_coursename',\n    SHORTNAME: '#course_tools_shortname',\n    CATEGORY: '#course_tools_category',\n    MODALHOLDER: '#course_tools_modal_content',\n    STARTDAY: '#course_tools_start_day',\n    STARTMONTH: '#course_tools_start_month',\n    STARTYEAR: '#course_tools_start_year',\n    STARTHOUR: '#course_tools_start_hour',\n    STARTMINUTE: '#course_tools_start_minute',\n    ENDDAY: '#course_tools_end_day',\n    ENDMONTH: '#course_tools_end_month',\n    ENDYEAR: '#course_tools_end_year',\n    ENDHOUR: '#course_tools_end_hour',\n    ENDMINUTE: '#course_tools_end_minute',\n    ENDENABLE: '#course_tools_enddate_enabled',\n    ERR_COURSENAME: '#error_course_tools_coursename',\n    ERR_SHORTNAME: '#error_course_tools_shortname',\n    ERR_CATEGORY: '#error_course_tools_category',\n    ERR_START: '#error_course_tools_start',\n    ERR_END: '#error_course_tools_end',\n};\n\nexport default class courseActionsLib {\n    _courseid =0;\n    _coursename=\"\";\n    _shortname=\"\";\n    _startdate=\"\";\n    _enddate=\"\";\n    _templatelist = \"\";\n    _categories = \"\";\n    self ;\n\n    constructor(courseid,coursename, shortname, startdate, enddate, templatelist, categories){\n        \n        self = this;\n\n        self._courseid = courseid;\n        self._coursename = coursename;\n        self._shortname = shortname;\n        self._startdate = startdate;\n        self._enddate = enddate;\n        self._templatelist = templatelist;\n        self._categories = categories;\n    }\n    /**\n     * Used for new course and duplicate course creation on button clicks\n     */\n    async coursereqAction(_element,button,selectcatergory, selectstart, selectend) {\n                                                                                                                                         \n        var modaltitle = (_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course';\n        var modalaction = (_element.attr('id') == button) ? 'create a new' : 'duplicate this';\n\n        var templatenew = (_element.attr('id') == button) ? true : \"\";\n        //var templateshort = (self._templatelist.length>6) ? \"\" : true;\n        var istemplatelist = (self._templatelist.length>0) ? true : \"\";\n\n        var template =  await self.render(TEMPLATES.MODAL_COURSE_ACTION_CONTENT, templatenew,true,istemplatelist);\n\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: \"<p><b>Are you sure you want to \"+ modalaction +\" course?</b><br />\"\n                + ((_element.attr('id') == button) ? \"<small>Select from the templates below. (Scroll for more options)</small>\" : \"<small>Student data will not be included in the duplicated course.</small>\")\n                + template\n                + \"</p>\"\n        }).then(function(modal) {\n\n            modal.setSaveButtonText((_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course');\n            var root = modal.getRoot();\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n                \n            if((_element.attr('id') == button)){\n                root.on(ModalEvents.save, function(e){\n                    if(!self.validate()){\n                        e.preventDefault();   \n                    }else{\n                        self.createCourse( );\n                    }    \n                });\n            }else{\n                root.on(ModalEvents.save, function(e){\n                    if(!self.validate()){\n                        e.preventDefault();   \n                    }else{\n                        self.duplicateCourse( );\n                    }\n                });\n            }\n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(){\n                //remove inputs otherwise duplicates are made causing id problems\n                $(SELECTORS.MODALHOLDER).remove();\n            });\n\n            modal.show();\n        }).done(function() {\n            if((_element.attr('id') == button)){\n                self.registerSelectorEventListeners(_element, button);\n            }else{\n                 $(SELECTORS.COURSENAME).val(self._coursename+\" (Copy)\");\n                 $(SELECTORS.SHORTNAME).val(self._shortname+\" (Copy)\");\n            }\n\n            self.populateDateSelects(selectstart,selectend);\n\n            //change category to that of course  \n            $(SELECTORS.CATEGORY).val(selectcatergory);\n                \n            self.registerDateEventListeners(_element);\n        });\n    }\n\n    /**\n     * Switch choosen template based on click in template list\n     */\n    populateDateSelects(selectstart, selectend) {\n\n          //populate start and end dates\n          var currentyear = (new Date()).getFullYear();\n          for (var year = 1900; year < currentyear+30; year++) {\n              $(SELECTORS.STARTYEAR).append('<option  value=\"'+year+'\" '+ ((year == selectstart.year) ? \"selected\": \" \" ) +'>' + year + '</option>');\n              $(SELECTORS.ENDYEAR).append('<option value=\"'+year+'\"'+(((year == selectend.year && selectend.year >= selectstart.year) || (year == currentyear && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>' + year + '</option>');\n          }\n\n          var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n          var currentmonth = (new Date()).getMonth();\n          for (var month = 0; month < monthNames.length; month++) {\n              var mtemp = month;\n              mtemp++;\n              $(SELECTORS.STARTMONTH).append('<option value=\"'+mtemp+'\" '+((mtemp == selectstart.mon) ? \"selected\": \" \" )+'>' + monthNames[month] + '</option>');\n              $(SELECTORS.ENDMONTH).append('<option value=\"'+mtemp+'\" '+(((mtemp == selectend.mon && selectend.year >= selectstart.year) || (month == currentmonth && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>' + monthNames[month] + '</option>');\n          }\n\n          var currentday = (new Date()).getDate();\n          for (var day = 1; day < 32; day++) {\n              $(SELECTORS.STARTDAY).append('<option value=\"'+day+'\" '+((day == selectstart.mday) ? \"selected\": \" \" )+'>' + day + '</option>');\n              $(SELECTORS.ENDDAY).append('<option value=\"'+day+'\" '+(((day == selectend.mday && selectend.year >= selectstart.year) || (day == currentday && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>' + day + '</option>');\n          }\n\n          for (var hour = 0; hour < 24; hour++) { \n              $(SELECTORS.STARTHOUR).append('<option value=\"'+hour+'\">' + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n              $(SELECTORS.ENDHOUR).append('<option value=\"'+hour+'\">' + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n          }\n          \n          for (var minute = 0; minute < 61; minute++) {\n              $(SELECTORS.STARTMINUTE).append('<option value=\"'+minute+'\"    >' + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n              $(SELECTORS.ENDMINUTE).append('<option  value=\"'+minute+'\"  >' + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n          }\n    }  \n    \n    /**\n     * Switch choosen template based on click in template list\n     */\n    setActiveTemplate(e) {\n\n        var templateHolder = $('div[data-role=\"templateholder\"');\n        $(templateHolder).find('.active').removeClass(\"active\");\n        e.addClass(\"active\");\n    }\n    /**\n     * Switch choosen template based on click in template list\n     */\n    setEnddate(e) {\n\n        var checked;\n        (e.is(\":checked\")) ? checked=false: checked=true;\n        $(SELECTORS.ENDDAY).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMONTH).prop(\"disabled\", checked);\n        $(SELECTORS.ENDYEAR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDHOUR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMINUTE).prop(\"disabled\", checked);\n    } \n    \n    /**\n     * Switch choosen template based on click in template list\n     */\n    validateDaysInMonth () { \n\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n\n        var actualStart = new Date(startyear, startmonth, 0).getDate();\n        var actualEnd = new Date(endyear, endmonth, 0).getDate();\n\n        if(actualStart < startday){\n            $(SELECTORS.STARTDAY).val(actualStart);\n        }\n        if(actualEnd < endday){\n            $(SELECTORS.ENDDAY).val(actualEnd);\n        }\n    }\n\n    /**\n     * Update the modal body using given template and data.\n     *\n     * @method render\n     * @param {String} template - The name of the template to render.\n     * @param {Object} data - Data for template.\n     * @param {Object} breadcrumbData - Data required for rending breadcrumbs.\n     */\n     async render(template,templatenew,templateshort, istemplatelist) {\n\n        var templatelist = [];\n        $.each(self._templatelist, function(key,val) {\n            templatelist.push({\"id\":val.id,\"fullname\":val.fullname,\"summary\":val.summary, \"courseimage\": val.courseimage});\n        });\n\n\n        var categories = [];\n        $.each(self._categories, function(key,val) {\n            categories.push({\"id\":val.id,\"name\":val.name});\n        });\n        const renderData = {\n            templatenew: templatenew,\n            templateshort: templateshort,\n            templatelist:templatelist,\n            istemplatelist:istemplatelist,\n            categories: categories\n        };\n        const renderPromise = await Templates.render(template, renderData);\n        return renderPromise;\n    }\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerSelectorEventListeners (_element, button) {\n\n        if(_element.attr('id') == button){\n            //set event listners for template options\n            $('.tmpl-label').bind('click', function() { self.setActiveTemplate($(this)); } );\n            $('button[data-role=\"info_button\"').bind('click', function() { self.showMoreInfo($(this)); } );\n        }\n\n    }\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerDateEventListeners (_element) {\n        //set event listners for template options\n        $(SELECTORS.ENDENABLE).bind('click', function() { self.setEnddate($(this)); } );\n        $(SELECTORS.ENDMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.ENDDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n    }\n\n    /**\n     * For Duplicate and Create course.\n     * Validate if course name and shortname have been entered\n     */\n     validate() {\n\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n   \n        var test =true; \n        if(coursename.length ==0){\n            $(SELECTORS.ERR_COURSENAME).text(\"Please enter a name for the course\");\n            $(SELECTORS.ERR_COURSENAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_COURSENAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_COURSENAME).text(\"\");\n        }\n\n        if(shortname.length ==0){\n            $(SELECTORS.ERR_SHORTNAME).text(\"Please enter a short name for the course\");\n            $(SELECTORS.ERR_SHORTNAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_SHORTNAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_SHORTNAME).text(\"\");\n        }\n\n        var startdate = new Date(startyear+\".\"+startmonth+\".\"+startday).getTime()/1000;\n        var enddate = new Date(endyear+\".\"+endmonth+\".\"+endday).getTime()/1000;\n      \n        if(enddate < startdate && $(SELECTORS.ENDENABLE).is(\":checked\") ){\n            $(SELECTORS.ERR_START).text(\"Course end date can not be before start date\");\n            $(SELECTORS.ERR_START).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_START).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_START).text(\"\");\n            $(SELECTORS.ERR_END).text(\"\");\n        }\n        return test;\n    }\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    showMoreInfo(e) {\n        \n        var course =\"\";\n        $.each(self._templatelist, function(key,val) {\n            var id = e.attr('id').split(\"_\");\n            if(id[1] == val.id){\n               course = {\"id\":val.id,\"fullname\":val.fullname,\"summary\":val.summary, \"courseimage\": val.courseimage};\n            }\n        });\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.DEFAULT,\n            title: course.fullname,\n            body: course.summary\n        }).then(function(modal) {\n            modal.show();\n        });\n    }\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    createCourse() {\n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n        \n        var templateHolder = $('div[data-role=\"templateholder\"');\n        var selectedTemplate = $(templateHolder).find('.active')\n        var templateid = $(selectedTemplate).attr('id');\n        \n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n        var enddate = \"0\";\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n        \n        if($('#mainspinner').length){\n            $('#mainspinner') .show();\n            $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n        }\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            templateid: templateid,    \n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_create_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            if($('#mainspinner').length){\n                $('#mainspinner') .hide();\n                $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            }\n\n            if(response.error!=\"\"){\n\n                title = \"ERROR:\"\n                info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                window.location.href = response.url;\n            }\n        }).fail(function(ex) {\n            notification.exception;\n        });  \n    }\n\n     /**\n     * After modal info has been entered call ajax request\n     */\n      duplicateCourse() {\n        \n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n        var enddate = \"0\";\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n\n        if($('#mainspinner').length){\n            $('#mainspinner') .show();\n            $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n        }\n         \n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_duplicate_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            if($('#mainspinner').length){\n                $('#mainspinner') .hide();\n                $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            }\n            if(response.error!=\"\"){\n\n                title = \"ERROR:\"\n                info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                 window.location.href = response.url;\n            }\n        }).fail(function() {\n            notification.exception;\n        });  \n    }\n}\n\n"],"file":"course_actions.min.js"}