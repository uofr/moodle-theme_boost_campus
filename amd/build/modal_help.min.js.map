{"version":3,"sources":["../src/modal_help.js"],"names":["define","$","Modal","ModalRegistry","ModalEvents","KeyCodes","CustomEvents","Notification","Templates","ModalHelpAjax","registered","SELECTORS","SEARCH","SEARCH_BUTTON","SUGGESTIONS","SUGGESTION_ITEM","SUGGESTION_ITEM_SEL","TEMPLATES","LOADING","MODAL_HELP_CONTENT","MODAL_HELP_TOPICS","ModalHelp","root","call","searchBox","find","searchButton","suggestionBox","topicList","suggestionIndex","contextLevel","courseId","prototype","Object","create","constructor","TYPE","selectSuggestion","suggestion","removeClass","addClass","getSuggestions","autocomplete","url","attr","substr","indexOf","getModal","focus","val","getGuidePage","then","response","renderPromise","render","html","setBody","catch","exception","updateSuggestions","searchValue","regex","RegExp","split","join","suggestions","topic","match","exec","title","push","length","start","index","sort","a","b","topics","js","replaceNodeContents","eq","registerEventListeners","getRoot","on","shown","getRemtlHelp","getTopicList","localeCompare","hidden","e","target","keyCode","arrowDown","arrowRight","preventDefault","arrowUp","arrowLeft","enter","events","activate","register"],"mappings":"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","sourcesContent":["define(\n[\n    'jquery',\n    'core/modal',\n    'core/modal_registry',\n    'core/modal_events',\n    'core/key_codes',\n    'core/custom_interaction_events',\n    'core/notification',\n    'core/templates',\n    'theme_urcourses_default/modal_help_ajax'\n],\nfunction(\n    $,\n    Modal,\n    ModalRegistry,\n    ModalEvents,\n    KeyCodes,\n    CustomEvents,\n    Notification,\n    Templates,\n    ModalHelpAjax\n) {\n    var registered = false;\n\n    var SELECTORS = {\n        SEARCH: '#modal_help_search',\n        SEARCH_BUTTON: '#modal_help_search_btn',\n        SUGGESTIONS: '#modal_help_search_suggestions',\n        SUGGESTION_ITEM: '.modal-help-suggestion-item',\n        SUGGESTION_ITEM_SEL: '.modal-help-suggestion-item.selected'\n    };\n\n    var TEMPLATES = {\n        LOADING: 'core/loading',\n        MODAL_HELP_CONTENT: 'theme_urcourses_default/modal_help_content',\n        MODAL_HELP_TOPICS: 'theme_urcourses_default/modal_help_topics'\n    };\n\n    /*\n     * Modal constructor.\n     *\n     * @param {object} root The root jQuery element for the modal.\n     */\n    var ModalHelp = function(root) {\n        Modal.call(this, root);\n        this.searchBox = this.root.find(SELECTORS.SEARCH);\n        this.searchButton = this.root.find(SELECTORS.SEARCH_BUTTON);\n        this.suggestionBox = this.root.find(SELECTORS.SUGGESTIONS);\n        this.topicList = null;\n        this.suggestionIndex = 0;\n        this.contextLevel = null;\n        this.courseId = null;\n    };\n\n    ModalHelp.prototype = Object.create(Modal.prototype);\n    ModalHelp.prototype.constructor = ModalHelp;\n    ModalHelp.TYPE = 'theme_urcourses_default-help';\n\n    ModalHelp.prototype.selectSuggestion = function(suggestion) {\n        this.suggestionBox.find(SELECTORS.SUGGESTION_ITEM).removeClass('selected');\n        suggestion.addClass('selected');\n    };\n\n    ModalHelp.prototype.getSuggestions = function() {\n        return this.suggestionBox.find(SELECTORS.SUGGESTION_ITEM);\n    };\n\n    ModalHelp.prototype.autocomplete = function(suggestion) {\n        var url = suggestion.attr('data-url');\n        url = url.substr(url.indexOf('/', 1));\n        this.getModal().focus();\n        this.suggestionBox.addClass('d-none');\n        this.searchBox.val(suggestion.attr('data-value'));\n        ModalHelpAjax.getGuidePage(url)\n        .then((response) => {\n            var renderPromise = Templates.render(TEMPLATES.MODAL_HELP_CONTENT, {html: response.html});\n            this.setBody(renderPromise);\n        }).catch(Notification.exception);\n    };\n\n    ModalHelp.prototype.updateSuggestions = function() {\n        var searchValue = this.searchBox.val();\n        var regex = RegExp(searchValue.split('').join('.*'), 'i');\n        var suggestions = [];\n        for (var topic of this.topicList) {\n            var match = regex.exec(topic.title);\n            if (match) {\n                suggestions.push({\n                    title: topic.title,\n                    url: topic.url,\n                    length: match[0].length,\n                    start: match.index\n                });\n            }\n        }\n        suggestions.sort((a, b) => {\n            if (a.start < b.start) {\n                return -1;\n            }\n            if (a.start > b.start) {\n                return 1;\n            }\n            if (a.length < b.length) {\n                return -1;\n            }\n            if (a.length > b.length) {\n                return 1;\n            }\n        });\n        Templates.render(TEMPLATES.MODAL_HELP_TOPICS, {topics: suggestions})\n        .then((html, js) => {\n            Templates.replaceNodeContents(SELECTORS.SUGGESTIONS, html, js);\n            this.selectSuggestion(this.getSuggestions().eq(0));\n        }).catch(Notification.exception);\n    };\n\n    /**\n     * Set up event handling.\n     *\n     * @method registerEventListeners\n     */\n    ModalHelp.prototype.registerEventListeners = function() {\n        Modal.prototype.registerEventListeners.call(this);\n\n        this.getRoot().on(ModalEvents.shown, () => {\n            ModalHelpAjax.getRemtlHelp(this.courseId)\n            .then((response) => {\n                var renderPromise = Templates.render(TEMPLATES.MODAL_HELP_CONTENT, {html: response.html});\n                return this.setBody(renderPromise);\n            }).catch(Notification.exception);\n            ModalHelpAjax.getTopicList(this.courseId)\n            .then((response) => {\n                this.topicList = response;\n                this.topicList.sort((a, b) => a.title.localeCompare(b.title));\n                return Templates.render(TEMPLATES.MODAL_HELP_TOPICS, {topics: response});\n            })\n            .then((html, js) => {\n                return Templates.replaceNodeContents(SELECTORS.SUGGESTIONS, html, js);\n            }).catch(Notification.exception);\n        });\n\n        this.getRoot().on(ModalEvents.hidden, () => {\n            this.setBody('');\n            this.searchBox.val('');\n            this.suggestionBox.addClass('d-none');\n            Templates.render(TEMPLATES.LOADING, {})\n            .then((html, js) => {\n                return Templates.replaceNodeContents(SELECTORS.SUGGESTIONS, html, js);\n            }).catch(Notification.exception);\n        });\n\n        this.getRoot().on('click', (e) => {\n            var target = e.target;\n            var searchBox = this.searchBox[0];\n            var suggestionBox = this.suggestionBox[0];\n            if (!(target === searchBox) && !(target === suggestionBox)) {\n                this.suggestionBox.addClass('d-none');\n            }\n        });\n\n        this.getModal().on('focus', SELECTORS.SEARCH, () => {\n            this.suggestionBox.removeClass('d-none');\n            this.updateSuggestions();\n            this.selectSuggestion(this.getSuggestions().eq(0));\n        });\n\n        this.getModal().on('input', SELECTORS.SEARCH, () => {\n            this.updateSuggestions();\n        });\n\n        this.getModal().on('keydown', SELECTORS.SEARCH, (e) => {\n            var suggestions = this.getSuggestions();\n            if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionIndex = 1;\n                suggestions.eq(this.suggestionIndex).focus();\n            } else if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionIndex = suggestions().length - 1;\n                suggestions.eq(this.suggestionIndex).focus();\n            } else if (e.keyCode === KeyCodes.enter) {\n                var suggestion = this.getSuggestions().eq(0);\n                this.autocomplete(suggestion);\n            }\n        });\n\n        this.getModal().on('keydown', SELECTORS.SUGGESTION_ITEM, (e) => {\n            var suggestions = this.getSuggestions();\n            if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionIndex++;\n                if (this.suggestionIndex > suggestions.length - 1) {\n                    this.suggestionIndex = 0;\n                }\n                suggestions.eq(this.suggestionIndex).focus();\n            } else if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionIndex--;\n                if (this.suggestionIndex < 0) {\n                    this.suggestionIndex = suggestions.length - 1;\n                }\n                suggestions.eq(this.suggestionIndex).focus();\n            }\n        });\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.SUGGESTION_ITEM, (e) => {\n            var suggestion = $(e.target);\n            this.autocomplete(suggestion);\n        });\n\n        this.getModal().on('mouseover focus', SELECTORS.SUGGESTION_ITEM, (e) => {\n            this.selectSuggestion($(e.target));\n        });\n    };\n\n    if (!registered) {\n        ModalRegistry.register(ModalHelp.TYPE, ModalHelp, 'theme_urcourses_default/modal_help');\n        registered = true;\n    }\n\n    return ModalHelp;\n});\n"],"file":"modal_help.min.js"}