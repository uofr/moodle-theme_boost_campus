define(["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events","core/fragment"],function(a,b,c,d,e,f,g){var h,i,j,k,l,m={UPLOADER:"#course_image_uploader"},n=function(b,c,g,n){h=a(b),i=c,j=g,k=n,d.get_string("modal_header","theme_urcourses_default").then(function(b){return e.create({type:e.types.SAVE_CANCEL,title:b,body:o()},a(m.UPLOADER))}).then(function(a){a.setLarge(),a.getRoot().on(f.hidden,function(){a.setBody(o())}),a.getRoot().on(f.save,p),a.getRoot().on("submit","form",q),l=a})},o=function(){return g.loadFragment("theme_urcourses_default","image_form",k,{jsonformdata:JSON.stringify({})})},p=function(a){a.preventDefault(),l.getRoot().find("form").submit()},q=function(a){a.preventDefault()};return{init:n}});