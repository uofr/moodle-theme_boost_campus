{"version":3,"sources":["../src/modal_help.js"],"names":["SELECTORS","SEARCH","SEARCH_BUTTON","SEARCH_CLEAR","SUGGESTIONS","SUGGESTION_ITEM","SEARCH_RESULT","TEMPLATES","MODAL_HELP_CONTENT","MODAL_HELP_SEARCH_RESULTS","ModalHelp","root","contextId","topicList","topicIndex","minSearchScore","searchBox","modal","find","searchButton","searchClear","suggestionBox","suggestionItemIndex","getRoot","on","ModalEvents","shown","initContent","hidden","resetModal","e","target","hideSuggestionBox","val","showSearchClear","hideSearchClear","updateSuggestions","scrollTop","clearSearch","query","search","keyCode","KeyCodes","enter","getModal","focus","CustomEvents","events","activate","topicTitle","attr","topic","title","toLowerCase","url","getPage","arrowUp","arrowLeft","preventDefault","getSuggestionItems","length","eq","arrowDown","arrowRight","ModalHelpAjax","getTopicList","add","getLandingPage","landingPage","renderPromise","Templates","render","html","setBody","Notification","exception","searchValue","suggestions","get","values","Array","isArray","map","suggestion","append","showSuggestionBox","searchGuides","searchResults","results","getGuidePage","guidePage","removeClass","addClass","Modal","registered","ModalRegistry","register","getType"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Campus - ModalHelp class\n *\n * @package    theme_urcourses_default\n * @author     John Lane\n *\n */\n\nimport $ from 'jquery';\nimport Notification from 'core/notification';\nimport Templates from 'core/templates';\nimport CustomEvents from 'core/custom_interaction_events';\nimport KeyCodes from 'core/key_codes';\nimport Modal from 'core/modal';\nimport ModalEvents from 'core/modal_events';\nimport ModalRegistry from 'core/modal_registry';\nimport ModalHelpAjax from 'theme_urcourses_default/modal_help_ajax';\nimport {FuzzySet} from 'theme_urcourses_default/fuzzyset';\n\nconst SELECTORS = {\n    SEARCH: '#modal_help_search',\n    SEARCH_BUTTON: '#modal_help_search_btn',\n    SEARCH_CLEAR: '#modal_help_search_clear',\n    SUGGESTIONS: '#modal_help_search_suggestions',\n    SUGGESTION_ITEM: '.modal-help-suggestion-item',\n    SEARCH_RESULT: '.modal-help-search-result'\n};\n\nconst TEMPLATES = {\n    MODAL_HELP_CONTENT: 'theme_urcourses_default/modal_help_content',\n    MODAL_HELP_SEARCH_RESULTS: 'theme_urcourses_default/modal_help_search_results'\n};\n\n/**\n * Help modal for UR Courses.\n *\n * @class ModalHelp\n * @property {Number} contextId - ID of the current page's context. Null until it is set in init.\n * @property {Array} topicList - List of topcis for which there is help. Null until it is set in initContent.\n * @property {FuzzySet} topicIndex - FuzzySet to enable autocomplete.\n * @property {Number} minSearchScore - How similar a search term has to be to attempt autocomplete.\n * @property {JQuery} searchBox - Search field jQuery element.\n * @property {JQuery} searchButton - Search button jQuery object.\n * @property {JQuery} searchClear - Clear search jQuery object.\n * @property {JQuery} suggestionBox - Suggestion box jQuery object.\n * @property {Number} suggestionItemIndex - Index of the autocomplete suggestion being selected.\n */\nexport default class ModalHelp extends Modal {\n\n    constructor(root) {\n        super(root);\n\n        this.contextId = null;\n        this.topicList = null;\n        this.topicIndex = FuzzySet();\n        this.minSearchScore = 0;\n        this.searchBox = this.modal.find(SELECTORS.SEARCH);\n        this.searchButton = this.modal.find(SELECTORS.SEARCH_BUTTON);\n        this.searchClear = this.modal.find(SELECTORS.SEARCH_CLEAR);\n        this.suggestionBox = this.modal.find(SELECTORS.SUGGESTIONS);\n        this.suggestionItemIndex = 0;\n    }\n\n    /**\n     * Sets contextid and registers events.\n     *\n     * @method init\n     * @param {Number} contextId Id of the current page's context.\n     */\n    init(contextId) {\n        this.contextId = contextId;\n\n        this.getRoot().on(ModalEvents.shown, () => {\n            this.initContent();\n        });\n\n        this.getRoot().on(ModalEvents.hidden, () => {\n            this.resetModal();\n        });\n\n        this.getRoot().on('click', (e) => {\n            if (e.target !== this.searchBox[0] && e.target !== this.suggestionBox[0]) {\n                this.hideSuggestionBox();\n            }\n        });\n\n        this.searchBox.on('input', () => {\n            if (this.searchBox.val()) {\n                this.showSearchClear();\n            }\n            else {\n                this.hideSearchClear();\n            }\n\n            this.updateSuggestions();\n        });\n\n        this.searchBox.on('focus', () => {\n            this.updateSuggestions();\n            this.suggestionBox[0].scrollTop = 0;\n        });\n\n        this.searchClear.on('click', () => {\n            this.clearSearch();\n        });\n\n        this.searchButton.on('click', () => {\n            const query = this.searchBox.val();\n            this.search(query);\n            this.hideSuggestionBox();\n        });\n\n        this.searchBox.on('keydown', (e) => {\n            if (e.keyCode === KeyCodes.enter) {\n                const query = this.searchBox.val();\n                this.search(query);\n                this.getModal().focus();\n                this.hideSuggestionBox();\n            }\n        });\n\n        this.suggestionBox.on(CustomEvents.events.activate, SELECTORS.SUGGESTION_ITEM, (e) => {\n            const topicTitle = $(e.target).attr('data-value');\n            const topic = this.topicList.find(topic => topic.title.toLowerCase() === topicTitle.toLowerCase());\n            const url = topic.url;\n            this.searchBox.val(topicTitle);\n            this.showSearchClear();\n            this.getPage(url);\n        });\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.SEARCH_RESULT, (e) => {\n            const url = $(e.target).attr('data-url');\n            this.getPage(url);\n        });\n\n        this.searchBox.on('keydown', (e) => {\n            if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionItemIndex = this.getSuggestionItems().length - 1;\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n            else if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionItemIndex = 0;\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n        });\n\n        this.suggestionBox.on('keydown', SELECTORS.SUGGESTION_ITEM, (e) => {\n            if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionItemIndex--;\n                if (this.suggestionItemIndex < 0) {\n                    this.suggestionItemIndex = this.getSuggestionItems().length - 1;\n                }\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n            else if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionItemIndex++;\n                if (this.suggestionItemIndex >= this.getSuggestionItems().length) {\n                    this.suggestionItemIndex = 0;\n                }\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n        });\n\n    }\n\n    /**\n     * Sets up topic list and outputs landing page.\n     *\n     * @method initContent\n     */\n    async initContent() {\n        try {\n            const topicList = await ModalHelpAjax.getTopicList(this.contextId);\n            this.topicList = topicList;\n            for (const topic of topicList) {\n                this.topicIndex.add(topic.title);\n            }\n\n            const landingPage = await ModalHelpAjax.getLandingPage(this.contextId);\n            const renderPromise = Templates.render(TEMPLATES.MODAL_HELP_CONTENT, {html: landingPage.html});\n            this.setBody(renderPromise);\n        }\n        catch(error) {\n            Notification.exception(error);\n        }\n    }\n\n    /**\n     * Resets modal content.\n     *\n     * @method resetModal\n     */\n    resetModal() {\n        this.setBody('');\n        this.searchBox.val('');\n        this.suggestionBox.html('');\n    }\n\n    /**\n     * Updates the suggestion list based on whatever's in the search box.\n     *\n     * @method updateSuggestions\n     */\n    updateSuggestions() {\n        const searchValue = this.searchBox.val();\n        const topicIndex = this.topicIndex;\n        const suggestionBox = this.suggestionBox;\n\n        let suggestions = topicIndex.get(searchValue, topicIndex.values(), this.minSearchScore);\n        if (Array.isArray(suggestions[0])) {\n            suggestions = suggestions.map(suggestion => suggestion[1]);\n        }\n\n        this.suggestionBox.html('');\n        for (const suggestion of suggestions) {\n            suggestionBox.append(`<a href=\"#\" class=\"modal-help-suggestion-item\"\n                                    data-value=\"${suggestion}\">${suggestion}</a>`);\n        }\n\n        this.showSuggestionBox();\n    }\n\n    /**\n     * Searches the guides and displays results.\n     *\n     * @method search\n     * @param {String} query\n     */\n    async search(query) {\n        if (!query) {\n            return;\n        }\n        try {\n            const searchResults = await ModalHelpAjax.searchGuides(this.contextId, query);\n            const renderPromise = Templates.render(TEMPLATES.MODAL_HELP_SEARCH_RESULTS, {\n                searchResults: searchResults.results,\n                query: searchResults.query\n            });\n            this.setBody(renderPromise);\n        }\n        catch (error) {\n            Notification.exception(error);\n        }\n    }\n\n    /**\n     * Fetches and outputs the guide page specified by url.\n     *\n     * @method getPage\n     * @param {String} url The url without the domain (ie /guides/instructor/...)\n     */\n    async getPage(url) {\n        try {\n            const guidePage = await ModalHelpAjax.getGuidePage(url);\n            const renderPromise = Templates.render(TEMPLATES.MODAL_HELP_CONTENT, {html: guidePage.html, title: guidePage.title});\n            this.setBody(renderPromise);\n        }\n        catch (error) {\n            Notification.exception(error);\n        }\n    }\n\n    /**\n     * Clears whatever is in the search box.\n     *\n     * @method clearSearch\n     */\n    clearSearch() {\n        this.searchBox.val('');\n        this.hideSearchClear();\n    }\n\n    /**\n     * Removes d-none class from suggestion box.\n     *\n     * @method showSuggestionBox\n     */\n    showSuggestionBox() {\n        this.suggestionBox.removeClass('d-none');\n    }\n\n    /**\n     * Adds d-none class to suggestion box.\n     *\n     * @method hideSuggestionBox\n     */\n    hideSuggestionBox() {\n        this.suggestionBox.addClass('d-none');\n    }\n\n    /**\n     * Removes d-none class from clear search button.\n     *\n     * @method showSearchClear\n     */\n    showSearchClear() {\n        this.searchClear.removeClass('d-none');\n    }\n\n    /**\n     * Adds d-none class to clear search button.\n     *\n     * @method showSearchClear\n     */\n    hideSearchClear() {\n        this.searchClear.addClass('d-none');\n    }\n\n    /**\n     * Returns modal type. Used when creating the modal using ModalFactory.\n     *\n     * @method getType\n     */\n    static getType() {\n        return 'theme_urcourses_default-help';\n    }\n\n    /**\n     * Returns an array of suggestions in the suggestion box.\n     *\n     * @method getSuggestionItems\n     */\n    getSuggestionItems() {\n        return this.suggestionBox.find(SELECTORS.SUGGESTION_ITEM);\n    }\n\n}\n\n// Setup code for adding ModalHelp to the modal factory.\nlet registered = false;\nif (!registered) {\n    ModalRegistry.register(ModalHelp.getType(), ModalHelp, 'theme_urcourses_default/modal_help');\n    registered = true;\n}\n"],"file":"modal_help.min.js"}