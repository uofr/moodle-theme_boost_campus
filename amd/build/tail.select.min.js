function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){if("function"==typeof define&&define.amd){define ("theme_urcourses_default/tail.select",function(){return b(a)})}else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){module.exports=b(a)}else{if("undefined"==typeof a.tail){a.tail={}}a.tail.select=b(a);if("undefined"!=typeof jQuery){jQuery.fn.tailselect=function(a){var b=[],c;this.each(function(){if(!1!==(c=tail.select(this,a))){b.push(c)}});return 1===b.length?b[0]:0===b.length?!1:b}}if("undefined"!=typeof MooTools){Element.implement({tailselect:function tailselect(a){return new tail.select(this,a)}})}}})(window,function(a){"use strict";var m=a.document;function b(a,b){return a&&"classList"in a?a.classList.contains(b):!1}function c(a,b){return a&&"classList"in a?a.classList.add(b):void 0}function f(a,b){return a&&"classList"in a?a.classList.remove(b):void 0}function g(a,b,c){if(CustomEvent&&CustomEvent.name){var d=new CustomEvent(b,c)}else{var d=m.createEvent("CustomEvent");d.initCustomEvent(b,!!c.bubbles,!!c.cancelable,c.detail)}return a.dispatchEvent(d)}function h(a,b){if("function"==typeof Object.assign){return Object.assign({},a,b||{})}var c=Object.constructor();for(var d in a){c[d]=d in b?b[d]:a[d]}return c}function j(a,b){var c=m.createElement(a);c.className=b&&b.join?b.join(" "):b||"";return c}var d=function(a,b){a="string"==typeof a?m.querySelectorAll(a):a;if(a instanceof NodeList||a instanceof HTMLCollection||a instanceof Array){for(var c=[],e=a.length,f=0;f<e;f++){c.push(new d(a[f],h(b,{})))}return 1===c.length?c[0]:0===c.length?!1:c}if(!(a instanceof Element)||!(this instanceof d)){return!(a instanceof Element)?!1:new d(a,b)}if(d.inst[a.getAttribute("data-tail-select")]){return d.inst[a.getAttribute("data-tail-select")]}if(a.getAttribute("data-select")){var g=JSON.parse(a.getAttribute("data-select").replace(/\'/g,"\""));if(g instanceof Object){b=h(b,g)}}var j=a.getAttribute("placeholder")||a.getAttribute("data-placeholder");b=b instanceof Object?b:{};b.multiple="multiple"in b?b.multiple:a.multiple;b.disabled="disabled"in b?b.disabled:a.disabled;b.placeholder=j||b.placeholder||null;b.width="auto"===b.width?a.offsetWidth+50:b.width;b.sourceBind="bindSourceSelect"in b?b.bindSourceSelect:b.sourceBind||!1;b.sourceHide="sourceHide"in b?b.sourceHide:b.sourceHide||!0;b.multiLimit=0<=b.multiLimit?b.multiLimit:1/0;this.e=a;this.id=++d.count;this.con=h(d.defaults,b);this.events={};d.inst["tail-"+this.id]=this;return this.init().bind()},e;d.version="0.5.16";d.status="beta";d.count=0;d.inst={};d.defaults={animate:!0,classNames:null,csvOutput:!1,csvSeparator:",",descriptions:!1,deselect:!1,disabled:!1,height:350,hideDisabled:!1,hideSelected:!1,items:{},locale:"en",linguisticRules:{ะต:"\u0451",a:"\xE4",o:"\xF6",u:"\xFC",ss:"\xDF"},multiple:!1,multiLimit:1/0,multiPinSelected:!1,multiContainer:!1,multiShowCount:!0,multiShowLimit:!1,multiSelectAll:!1,multiSelectGroup:!0,openAbove:null,placeholder:null,search:!1,searchConfig:["text","value"],searchFocus:!0,searchMarked:!0,searchMinLength:1,searchDisabled:!0,sortItems:!1,sortGroups:!1,sourceBind:!1,sourceHide:!0,startOpen:!1,stayOpen:!1,width:null,cbComplete:void 0,cbEmpty:void 0,cbLoopItem:void 0,cbLoopGroup:void 0};d.strings={en:{all:"All",none:"None",empty:"No Options available",emptySearch:"No Options found",limit:"You can't select more Options",placeholder:"Select an Option...",placeholderMulti:"Select up to :limit Options...",search:"Type in to search...",disabled:"This Field is disabled"},modify:function modify(a,b,c){if(!(a in this)){return!1}if(b instanceof Object){for(var d in b){this.modify(a,d,b[d])}}else{this[a][b]="string"==typeof c?c:this[a][b]}return!0},register:function register(a,b){if("string"!=typeof a||!(b instanceof Object)){return!1}this[a]=b;return!0}};d.prototype={_e:function _e(a,b,c){if(!(a in this.__)){return!c?a:c}var a=this.__[a];if("function"==typeof a){a=a.call(this,b)}if("object"===_typeof(b)){for(var d in b){a=a.replace(d,b[d])}}return a},init:function init(){var a=this,b=["tail-select"],f=this.con,g=/^[0-9.]+(?:cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|\%)$/i,k=!0===f.classNames?this.e.className:f.classNames;b.push(k&&k.push?k.join(" "):k&&k.split?k:"no-classes");if(f.hideSelected){b.push("hide-selected")}if(f.hideDisabled){b.push("hide-disabled")}if(0==f.multiLimit){b.push("disabled")}if(f.multiple){b.push("multiple")}if(f.deselect){b.push("deselect")}if(f.disabled){b.push("disabled")}this.__=h(d.strings.en,d.strings[f.locale]||{});this._init=!0;this._query=!1;this.select=j("DIV",b);this.label=j("DIV","select-label");this.dropdown=j("DIV","select-dropdown");this.search=j("DIV","dropdown-search");this.csvInput=j("INPUT","select-search");if(null!==this.e.getAttribute("tabindex")){this.select.setAttribute("tabindex",this.e.getAttribute("tabindex"))}else{this.select.setAttribute("tabindex",0)}if(f.width&&g.test(f.width)){this.select.style.width=f.width}else if(f.width&&!isNaN(parseFloat(f.width,10))){this.select.style.width=f.width+"px"}this.label.addEventListener("click",function(){a.toggle.call(a,a.con.animate)});this.select.appendChild(this.label);if(!isNaN(parseInt(f.height,10))){this.dropdown.style.maxHeight=parseInt(f.height,10)+"px"}if(f.search){this.search.innerHTML="<input type=\"text\" class=\"search-input\" />";this.search.children[0].placeholder=this._e("search");this.search.children[0].addEventListener("input",function(){a.query.call(a,this.value.length>f.searchMinLength?this.value:void 0)});this.dropdown.appendChild(this.search)}this.select.appendChild(this.dropdown);this.csvInput.type="hidden";if(f.csvOutput){this.csvInput.name=this.e.name;this.e.removeAttribute("name");this.select.appendChild(this.csvInput)}if(f.multiple&&f.multiContainer){if(m.querySelector(f.multiContainer)){this.container=m.querySelector(f.multiContainer);this.container.className+=" tail-select-container"}else if(!0===f.multiContainer){this.container=this.label;this.container.className+=" tail-select-container"}}this.options=new e(this.e,this);for(var c=this.e.options.length,l=0;l<c;l++){this.options.set(this.e.options[l],!1)}for(var n in f.items){if("string"==typeof f.items[n]){f.items[n]={value:f.items[n]}}this.options.add(f.items[n].key||n,f.items[n].value,f.items[n].group,f.items[n].selected,f.items[n].disabled,f.items[n].description)}this.query();if(this.e.nextElementSibling){this.e.parentElement.insertBefore(this.select,this.e.nextElementSibling)}else{this.e.parentElement.appendChild(this.select)}if(f.sourceHide){if("none"==this.e.style.display){this.select.style.display="none";this.e.setAttribute("data-select-hidden","display")}else if("hidden"==this.e.style.visibility){this.select.style.visibiltiy="hidden";this.e.setAttribute("data-select-hidden","visibility")}else{this.e.style.display="none";this.e.setAttribute("data-select-hidden","0")}}this.e.setAttribute("data-tail-select","tail-"+this.id);if(a.con.startOpen){this.open(f.animate)}(f.cbComplete||function(){}).call(this,this.select);return(this._init=!1)?this:this},bind:function bind(){var a=this;m.addEventListener("keydown",function(d){var g=d.keyCode||d.which,h,i,j,k,l,m=32==g&&a.select===document.activeElement;if(!m&&(!b(a.select,"active")||0>[13,27,38,40].indexOf(g))){return!1}d.preventDefault();d.stopPropagation();if(32===g){return a.open(a.con.animate)}if(13==g){if(h=a.dropdown.querySelector(".dropdown-option.hover:not(.disabled)")){a.options.select.call(a.options,h)}}if(27==g||13==g){return a.close(a.con.animate)}if(h=a.dropdown.querySelector(".dropdown-option.hover:not(.disabled)")){f(h,"hover");j=[(40==g?"next":"previous")+"ElementSibling"];do{if(null!==(k=h[j])&&"LI"==h.tagName){h=k}else if(null!==(k=h.parentElement[j])&&0<k.children.length&&"UL"==k.tagName){h=k.children[40==g?0:k.children.length-1]}else{h=!1}if(h&&(!b(h,"dropdown-option")||b(h,"disabled"))){continue}break}while(!0)}if(!h&&40==g){h=a.dropdown.querySelector(".dropdown-option:not(.disabled)")}else if(!h&&38==g){l=a.dropdown.querySelectorAll(".dropdown-option:not(.disabled)");h=l[l.length-1]}if(h&&(i=a.dropdown.querySelector(".dropdown-inner"))){var n=function(a){var b={top:a.offsetTop,height:a.offsetHeight};while((a=a.parentElement)!=i){b.top+=a.offsetTop}return b}(h);c(h,"hover");i.scrollTop=Math.max(0,n.top-2*n.height)}return!0});m.addEventListener("click",function(c){if(!b(a.select,"active")||b(a.select,"idle")){return!1}if(!0===a.con.stayOpen){return!1}for(var d=[a.e,a.select,a.container],e=d.length,f=0;f<e;f++){if(d[f]&&(d[f].contains(c.target)||d[f]==c.target)){return!1}if(!c.target.parentElement){return!1}}return a.close.call(a,a.con.animate)});if(!this.con.sourceBind){return!0}this.e.addEventListener("change",function(b){if(b.detail!=void 0){return!1}b.preventDefault();b.stopPropagation();if(!this.multiple&&this.selectedIndex){a.options.select.call(a.options,this.options[this.selectedIndex])}else{var c=[].concat(a.options.selected),d=[].filter.call(this.querySelectorAll("option:checked"),function(a){if(0<=c.indexOf(a)){c.splice(c.indexOf(a),1);return!1}return!0});a.options.walk.call(a.options,"unselect",c);a.options.walk.call(a.options,"select",d)}});return!0},callback:function callback(a,b,d){var e=a.key.replace(/('|\\)/g,"\\$1"),g=a.group.replace(/('|\\)/g,"\\$1");if("rebuild"==b){return this.query()}var h=this.dropdown.querySelector("[data-key='"+e+"'][data-group='"+g+"']");if(h&&0<=["select","disable"].indexOf(b)){c(h,"select"==b?"selected":"disabled")}else if(h&&0<=["unselect","enable"].indexOf(b)){f(h,"unselect"==b?"selected":"disabled")}this.update(a);return!0===d?!0:this.trigger("change",a,b)},trigger:function trigger(a){if(this._init){return!1}var b={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};if("change"==a&&arguments[2]&&0<=arguments[2].indexOf("select")){g(this.e,"input",b);g(this.e,"change",b)}g(this.select,"tail::"+a,b);var c=[],d;Array.prototype.map.call(arguments,function(a,b){if(0<b){c.push(a)}});(this.events[a]||[]).forEach(function(a){d=[].concat(c);d.push(a.args||null);(a.cb||function(){}).apply(b.detail.self,d)});return!0},calc:function calc(){var b=this.dropdown.cloneNode(!0),d=this.con.height,e=0,g=this.dropdown.querySelector(".dropdown-inner");b=this.dropdown.cloneNode(!0);b.style.cssText="height:auto;min-height:auto;max-height:none;opacity:0;display:block;visibility:hidden;";b.style.maxHeight=this.con.height+"px";b.className+=" cloned";this.dropdown.parentElement.appendChild(b);d=d>b.clientHeight?b.clientHeight:d;if(this.con.search){e=b.querySelector(".dropdown-search").clientHeight}this.dropdown.parentElement.removeChild(b);var h=this.select.getBoundingClientRect(),i=a.innerHeight-(h.top+h.height),j=d+e>i?h.top>i:!1;if(!0===this.con.openAbove||!1!==this.con.openAbove&&j){j=!0,d=Math.min(d,h.top-10);c(this.select,"open-top")}else{j=!1,d=Math.min(d,i-10);f(this.select,"open-top")}if(g){this.dropdown.style.maxHeight=d+"px";g.style.maxHeight=d-e+"px"}return this},query:function query(a,c){var d,e,f,h,i,k,l=this,m=this.con,n="getAttribute",g=j("DIV","dropdown-inner"),o=!a?"walker":"finder",p=!a?[m.sortItems,m.sortGroups]:[a,c];this._query="string"==typeof a?a:!1;while(d=this.options[o].apply(this.options,p)){if(!f||f&&f[n]("data-group")!==d.group){e=(m.cbLoopGroup||this.cbGroup).call(this,d.group,a,g);if(e instanceof Element){f=e;f.setAttribute("data-group",d.group);g.appendChild(f)}else{break}}if(null===(h=(m.cbLoopItem||this.cbItem).call(this,d,f,a,g))){continue}if(!1===h){break}h.setAttribute("data-key",d.key);h.setAttribute("data-group",d.group);h.addEventListener("click",function(){if(!this.hasAttribute("data-key")){return!1}var a=this[n]("data-key"),b=this[n]("data-group")||"#";if(l.options.toggle.call(l.options,a,b)){if(!1===l.con.stayOpen&&!l.con.multiple){l.close.call(l,l.con.animate)}}});f.appendChild(h)}var q=g.querySelectorAll("*[data-key]").length;if(0==q){(this.con.cbEmpty||function(a){var b=j("SPAN","dropdown-empty");b.innerText=this._e("empty");a.appendChild(b)}).call(this,g,a)}if(0<q&&m.multiple&&m.multiLimit==1/0&&m.multiSelectAll){i=j("BUTTON","tail-all"),k=j("BUTTON","tail-none");i.innerText=this._e("all");i.addEventListener("click",function(a){a.preventDefault();var b=l.dropdown.querySelectorAll(".dropdown-inner .dropdown-option");l.options.walk.call(l.options,"select",b)});k.innerText=this._e("none");k.addEventListener("click",function(a){a.preventDefault();var b=l.dropdown.querySelectorAll(".dropdown-inner .dropdown-option");l.options.walk.call(l.options,"unselect",b)});h=j("SPAN","dropdown-action");h.appendChild(i);h.appendChild(k);g.insertBefore(h,g.children[0])}var r=this.dropdown.querySelector(".dropdown-inner");this.dropdown[(r?"replace":"append")+"Child"](g,r);if(b(this.select,"active")){this.calc()}return this.updateCSV().updateLabel()},cbGroup:function cbGroup(a){var b=j("UL","dropdown-optgroup"),c=this,d,e;if("#"==a){return b}b.innerHTML="<li class=\"optgroup-title\"><b>"+a+"</b></li>";if(this.con.multiple&&this.con.multiLimit==1/0&&this.con.multiSelectAll){d=j("BUTTON","tail-none"),e=j("BUTTON","tail-all");d.innerText=this._e("none");d.addEventListener("click",function(a){a.preventDefault();var b=this.parentElement.parentElement.getAttribute("data-group");c.options.all.call(c.options,"unselect",b)});e.innerText=this._e("all");e.addEventListener("click",function(a){a.preventDefault();var b=this.parentElement.parentElement.getAttribute("data-group");c.options.all.call(c.options,"select",b)});b.children[0].appendChild(d);b.children[0].appendChild(e)}return b},cbItem:function cbItem(a,b,c){var d=j("LI","dropdown-option"+(a.selected?" selected":"")+(a.disabled?" disabled":""));if(c&&0<c.length&&this.con.searchMarked){c=this.options.applyLinguisticRules(c);d.innerHTML=a.value.replace(new RegExp("("+c+")","i"),"<mark>$1</mark>")}else{d.innerText=a.value}if(this.con.descriptions&&a.description){d.innerHTML+="<span class=\"option-description\">"+a.description+"</span>"}return d},update:function update(a){return this.updateLabel().updateContainer(a).updatePin(a).updateCSV(a)},updateLabel:function updateLabel(a){if(this.container==this.label&&0<this.options.selected.length){if(this.label.querySelector(".label-inner")){this.label.removeChild(this.label.querySelector(".label-inner"))}if(this.label.querySelector(".label-count")){this.label.removeChild(this.label.querySelector(".label-count"))}return this}var d=this.con,c=this.options.selected.length,e;if("string"!=typeof a){if(d.disabled){a="disabled"}else if(0==this.dropdown.querySelectorAll("*[data-key]").length){a="empty"+(b(this.select,"in-search")?"Search":"")}else if(d.multiLimit<=c){a="limit"}else if(!d.multiple&&0<this.options.selected.length){a=this.options.selected[0].innerText}else if("string"==typeof d.placeholder){a=d.placeholder}else{a="placeholder"+(d.multiple&&d.multiLimit<1/0?"Multi":"")}}a=this._e(a,{":limit":d.multiLimit},a);a="<span class=\"label-inner\">"+a+"</span>",e=d.multiShowLimit&&d.multiLimit<1/0;if(d.multiple&&d.multiShowCount){a="<span class=\"label-count\">:c</span>"+a;a=a.replace(":c",c+(e?" / "+d.multiLimit:""))}this.label.innerHTML=a;return this},updateContainer:function updateContainer(a){if(!this.container||!this.con.multiContainer){return this}var b="[data-group='"+a.group+"'][data-key='"+a.key+"']";if(this.container.querySelector(b)){if(!a.selected){this.container.removeChild(this.container.querySelector(b))}return this}if(a.selected){var c=this,d=j("DIV","select-handle");d.innerText=a.value;d.setAttribute("data-key",a.key);d.setAttribute("data-group",a.group);d.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();var b=this.getAttribute("data-key"),d=this.getAttribute("data-group");c.options.unselect.call(c.options,b,d)});this.container.appendChild(d)}return this},updatePin:function updatePin(a){var b=this.dropdown.querySelector(".dropdown-inner ul"),c="li[data-key='"+a.key+"'][data-group='"+a.group+"']";if(!this.con.multiPinSelected||!b||!1!==this._query){return this}c=this.dropdown.querySelector(c);if(a.selected){b.insertBefore(c,b.children[0])}else{var d=this.dropdown.querySelector("ul[data-group='"+a.group+"']"),e=this.options[a.index-1],f=!1;while(e&&e.group==a.group){if(f=d.querySelector("li[data-key='"+e.key+"']")){break}e=this.options[e.index-1]}if(f&&f.nextElementSibling){d.insertBefore(c,f.nextElementSibling)}else{d.appendChild(c)}}return this},updateCSV:function updateCSV(){if(!this.csvInput||!this.con.csvOutput){return this}for(var a=[],b=this.options.selected.length,c=0;c<b;c++){a.push(this.options.selected[c].value)}this.csvInput.value=a.join(this.con.csvSeparator||",");return this},open:function open(a){if(b(this.select,"active")||b(this.select,"idle")||this.con.disabled){return!1}this.calc();var d=function(){c(g.select,"active");f(g.select,"idle");this.dropdown.style.height="auto";this.dropdown.style.overflow="visible";this.label.removeAttribute("style");if(this.con.search&&this.con.searchFocus){this.dropdown.querySelector("input").focus()}this.trigger.call(this,"open")},g=this,i=this.dropdown.style;if(!1!==a){this.label.style.zIndex=25;this.dropdown.style.cssText+="height:0;display:block;overflow:hidden;";c(g.select,"idle");(function a(){var b=parseInt(i.height,10),c=parseInt(i.maxHeight,10);if(b>=c){return d.call(g)}i.height=(b+50>c?c:b+50)+"px";setTimeout(a,20)})()}else{i.cssText="height:"+i.maxHeight+";display:block;overflow:hidden;";d.call(this)}return this},close:function close(a){if(!b(this.select,"active")||b(this.select,"idle")){return!1}var d=function(){f(this.select,"active");f(this.select,"idle");this.dropdown.removeAttribute("style");this.dropdown.querySelector(".dropdown-inner").removeAttribute("style");this.trigger.call(this,"close")},g=this,h=this.dropdown;if(!1!==a){c(this.select,"idle");this.dropdown.style.overflow="hidden";(function a(){if(0>=parseInt(h.offsetHeight,10)-50){return d.call(g)}h.style.height=parseInt(h.offsetHeight,10)-50+"px";setTimeout(a,20)})()}else{d.call(this)}return this},toggle:function toggle(a){if(b(this.select,"active")){return this.close(a)}return!b(this.select,"idle")?this.open(a):this},remove:function remove(){this.e.removeAttribute("data-tail-select");if(this.e.hasAttribute("data-select-hidden")){if("0"==this.e.getAttribute("data-select-hidden")){this.e.style.removeProperty("display")}this.e.removeAttribute("data-select-hidden")}Array.prototype.map.call(this.e.querySelectorAll("[data-select-option='add']"),function(a){a.parentElement.removeChild(a)});Array.prototype.map.call(this.e.querySelectorAll("[data-select-optgroup='add']"),function(a){a.parentElement.removeChild(a)});this.e.name=this.csvInput.hasAttribute("name")?this.csvInput.name:this.e.name;if(this.select.parentElement){this.select.parentElement.removeChild(this.select)}if(this.container){for(var a=this.container.querySelectorAll(".select-handle"),b=a.length,c=0;c<b;c++){this.container.removeChild(a[c])}}return this},reload:function reload(){return this.remove().init()},config:function config(a,b,c){if(a instanceof Object){for(var d in a){this.config(d,a[d],!1)}return this.reload()?this.con:this.con}if(void 0===a){return this.con}else if(!(a in this.con)){return!1}if(void 0===b){return this.con[a]}this.con[a]=b;if(!1!==c){this.reload()}return this},enable:function enable(a){f(this.select,"disabled");this.e.disabled=!1;this.con.disabled=!1;return!1===a?this:this.reload()},disable:function disable(a){c(this.select,"disabled");this.e.disabled=!0;this.con.disabled=!0;return!1===a?this:this.reload()},on:function on(a,b,c){if(0>["open","close","change"].indexOf(a)||"function"!=typeof b){return!1}if(!(a in this.events)){this.events[a]=[]}this.events[a].push({cb:b,args:c instanceof Array?c:[]});return this},value:function value(){if(0==this.options.selected.length){return null}if(this.con.multiple){return this.options.selected.map(function(a){return a.value})}return this.options.selected[0].value}};e=d.options=function(a,b){if(!(this instanceof e)){return new e(a,b)}this.self=b;this.element=a;this.length=0;this.selected=[];this.disabled=[];this.items={"#":{}};this.groups={};return this};e.prototype={_r:function _r(a){return a.replace("disabled","disable").replace("enabled","enable").replace("selected","select").replace("unselected","unselect")},get:function get(a,b){if("object"===_typeof(a)&&a.key&&a.group){b=a.group||b;a=a.key}else if(a instanceof Element){if("OPTION"==a.tagName){b=a.parentElement.label||"#";a=a.value||a.innerText}else if(a.hasAttribute("data-key")){b=a.getAttribute("data-group")||a.parentElement.getAttribute("data-group")||"#";a=a.getAttribute("data-key")}}else if("string"!=typeof a){return!1}a=/^[0-9]+$/.test(a)?"_"+a:a;return b in this.items?this.items[b][a]:!1},set:function set(a,b){var c=a.value||a.innerText,d=a.parentElement.label||"#";if(!(d in this.items)){this.items[d]={};this.groups[d]=a.parentElement}if(c in this.items[d]){return!1}var e=/^[0-9]+$/.test(c)?"_"+c:c,f=this.self.con;if(f.multiple&&this.selected.length>=f.multiLimit){a.selected=!1}if(a.selected&&f.deselect&&(!a.hasAttribute("selected")||0==f.multiLimit)){a.selected=!1;a.parentElement.selectedIndex=-1}if(a.hasAttribute("data-description")){var g=j("SPAN");g.innerHTML=a.getAttribute("data-description");a.setAttribute("data-description",g.innerHTML)}this.items[d][e]={key:c,value:a.text,description:a.getAttribute("data-description")||null,group:d,option:a,optgroup:"#"!=d?this.groups[d]:void 0,selected:a.selected,disabled:a.disabled,hidden:a.hidden||!1};this.length++;if(a.selected){this.select(this.items[d][e])}if(a.disabled){this.disable(this.items[d][e])}return b?this.self.callback(this.items[d][c],"rebuild"):!0},add:function add(a,b,c,d,e,f,g){if(a instanceof Object){for(var h in a){this.add(a[h].key||h,a[h].value,a[h].group,a[h].selected,a[h].disabled,a[h].description,!1)}return this.self.query()}if(this.get(a,c)){return!1}c="string"==typeof c?c:"#";if("#"!==c&&!(c in this.groups)){var i=j("OPTGROUP");i.label=c;i.setAttribute("data-select-optgroup","add");this.element.appendChild(i);this.items[c]={};this.groups[c]=i}if(this.self.con.multiple&&this.selected.length>=this.self.con.multiLimit){d=!1}e=!!e;var k=m.createElement("OPTION");k.value=a;k.selected=d;k.disabled=e;k.innerText=b;k.setAttribute("data-select-option","add");if(f&&0<f.length){k.setAttribute("data-description",f)}("#"==c?this.element:this.groups[c]).appendChild(k);return this.set(k,g)},move:function move(a,b,c,d){if(!(a=this.get(a,b))){return!1}if("#"!==c&&!(c in this.groups)){var e=j("OPTGROUP");e.label=c;this.element.appendChild(e);this.items[c]={};this.groups[c]=e;this.groups[c].appendChild(a.option)}delete this.items[a.group][a.key];a.group=c;a.optgroup=this.groups[c]||void 0;this.items[c][a.key]=a;return d?this.self.query():!0},remove:function remove(a,b,c){if(!(a=this.get(a,b))){return!1}if(a.selected){this.unselect(a)}if(a.disabled){this.enable(a)}a.option.parentElement.removeChild(a.option);var d=/^[0-9]+$/.test(a.key)?"_"+a.key:a.key;delete this.items[a.group][d];this.length--;if(0===Object.keys(this.items[a.group]).length){delete this.items[a.group];delete this.groups[a.group]}return c?this.self.query():!0},is:function is(a,b,c){var a=this._r(a),d=this.get(b,c);if(!d||0>["select","unselect","disable","enable"].indexOf(a)){return null}if("disable"==a||"enable"==a){return"disable"==a?d.disabled:!d.disabled}else if("select"==a||"unselect"==a){return"select"==a?d.selected:!d.selected}return!1},handle:function handle(a,c,d,e){var f=this.get(c,d),a=this._r(a);if(!f||0>["select","unselect","disable","enable"].indexOf(a)){return null}if("disable"==a||"enable"==a){if(!(f.option in this.disabled)&&"disable"==a){this.disabled.push(f.option)}else if(f.option in this.disabled&&"enable"==a){this.disabled.splice(this.disabled.indexOf(f.option),1)}f.disabled="disable"==a;f.option.disabled="disable"==a;return this.self.callback.call(this.self,f,a)}var g=b(this.self.select,"disabled")||f.disabled||f.option.disabled,h=this.self.con.multiple&&this.self.con.multiLimit<=this.selected.length,j=!this.self.con.multiple&&0<this.selected.indexOf(f.option),k=0==this.self.con.multiLimit&&!0==this.self.con.deselect,l=!this.self.con.multiple&&!this.self.con.deselect&&!0!==e;if("select"==a){if(g||h||k||j){return!1}if(!this.self.con.multiple){for(var m in this.selected){this.unselect(this.selected[m],void 0,!0)}}if(0>this.selected.indexOf(f.option)){this.selected.push(f.option)}}else if("unselect"==a){if(g||l){return!1}this.selected.splice(this.selected.indexOf(f.option),1)}f.selected="select"==a;f.option.selected="select"==a;f.option[(6<a.length?"remove":"set")+"Attribute"]("selected","selected");return this.self.callback.call(this.self,f,a,e)},enable:function enable(a,b){return this.handle("enable",a,b,!1)},disable:function disable(a,b){return this.handle("disable",a,b,!1)},select:function(a,b){return this.handle("select",a,b,!1)},unselect:function unselect(a,b,c){return this.handle("unselect",a,b,c)},toggle:function toggle(a,b){if(!(a=this.get(a,b))){return!1}return this.handle(a.selected?"unselect":"select",a,b,!1)},invert:function(a){a=this._r(a);if(0<=["enable","disable"].indexOf(a)){var b=this.disabled,c="enable"==a?"disable":"enable"}else if(0<=["select","unselect"].indexOf(a)){var b=this.selected,c="select"==a?"unselect":"select"}var d=Array.prototype.filter.call(this,function(a){return!(a in b)}),e=this;[].concat(b).forEach(function(a){e.handle.call(e,c,a)});[].concat(d).forEach(function(b){e.handle.call(e,a,b)});return!0},all:function all(a,b){var c=this,d=this;if(b in this.items){d=Object.keys(this.items[b])}else if(0<=["unselect","enable"].indexOf(a)){d=[].concat("unselect"==a?this.selected:this.disabled)}Array.prototype.forEach.call(d,function(d){c.handle.call(c,a,d,b,!1)});return!0},walk:function walk(a,b,c){if(b instanceof Array||b.length){for(var d=b.length,e=0;e<d;e++){this.handle.apply(this,[a,b[e],null].concat(c))}}else if(b instanceof Object){var f=this;if(b.forEach){b.forEach(function(b){f.handle.apply(f,[a,b,null].concat(c))})}else{for(var g in b){if("string"!=typeof b[g]&&"number"!=typeof b[g]&&!(b[g]instanceof Element)){continue}this.handle.apply(this,[a,b[g],g in this.items?g:null]).concat(c)}}}return this},applyLinguisticRules:function applyLinguisticRules(a,b){var c=this.self.con.linguisticRules,d=[];Object.keys(c).forEach(function(a){d.push("("+a+"|["+c[a]+"])")});if(b){d=d.concat(d.map(function(a){return a.toUpperCase()}))}return a.replace(new RegExp(d.join("|"),b?"g":"ig"),function(a){return d[[].indexOf.call(arguments,a,1)-1]})},find:function find(a,b){var c=this,d,e={};if(!b){b=this.self.con.searchConfig}if("function"==typeof b){d=b.bind(this,a)}else{b=b instanceof Array?b:[b];b.forEach(function(a){if("string"==typeof a){e[a]=!0}});e.any=!e.any?e.attributes&&e.value:e.any;if(!e.regex||e.text){a=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}if(!e.exactglyphes){a=this.self.options.applyLinguisticRules(a,e.case)}if(e.word){a="\\b"+a+"\\b"}var f=new RegExp(a,!e.case?"mi":"m"),g=function(a){return f.test(a.text||a.value)};if(e.any){d=function(a){return g(a)||[].some.call(a.attributes,g)}}else if(e.attributes){d=function(a){return[].some.call(a.attributes,g)}}else{d=g}if(!this.self.con.searchDisabled){var h=d;d=function(a){return!a.disabled&&h(a)}}}return[].filter.call(this.self.e.options,d).map(function(a){return a.hidden?!1:c.get(a)})},finder:function finder(a,b){if(this._finderLoop===void 0){this._finderLoop=this.find(a,b)}var c;while((c=this._finderLoop.shift())!==void 0){return c}delete this._finderLoop;return!1},walker:function walker(a,b){if("undefined"!=typeof this._inLoop&&this._inLoop){if(0<this._inItems.length){do{var c=this.items[this._inGroup][this._inItems.shift()]}while(!0===c.hidden);return c}if(0<this._inGroups.length){while(0<this._inGroups.length){var d=this._inGroups.shift();if(!(d in this.items)){return!1}var e=Object.keys(this.items[d]);if(0<e.length){break}}if("ASC"==a){e.sort()}else if("DESC"==a){e.sort().reverse()}else if("function"==typeof a){e=a.call(this,e)}this._inItems=e;this._inGroup=d;return this.walker(null,null)}delete this._inLoop;delete this._inItems;delete this._inGroup;delete this._inGroups;return!1}var f=Object.keys(this.groups)||[];if("ASC"==b){f.sort()}else if("DESC"==b){f.sort().reverse()}else if("function"==typeof b){f=b.call(this,f)}f.unshift("#");this._inLoop=!0;this._inItems=[];this._inGroups=f;return this.walker(a,null)}};return d});
//# sourceMappingURL=tail.select.min.js.map
