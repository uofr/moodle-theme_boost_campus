{"version":3,"sources":["../src/course_actions.js"],"names":["TEMPLATES","MODAL_COURSE_ACTION_CONTENT","SELECTORS","COURSENAME","SHORTNAME","CATEGORY","MODALHOLDER","STARTDAY","STARTMONTH","STARTYEAR","STARTHOUR","STARTMINUTE","ENDDAY","ENDMONTH","ENDYEAR","ENDHOUR","ENDMINUTE","ENDENABLE","ERR_COURSENAME","ERR_SHORTNAME","ERR_CATEGORY","ERR_START","ERR_END","courseActionsLib","courseid","coursename","shortname","startdate","enddate","templatelist","categories","self","_courseid","_coursename","_shortname","_startdate","_enddate","_templatelist","_categories","_element","button","selectcatergory","selectstart","selectend","modaltitle","attr","modalaction","templatenew","templateshort","length","istemplatelist","render","template","ModalFactory","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","on","ModalEvents","cancel","save","e","validate","preventDefault","createCourse","duplicateCourse","hidden","remove","show","done","registerSelectorEventListeners","val","populateDateSelects","registerDateEventListeners","currentyear","Date","getFullYear","year","append","monthNames","currentmonth","getMonth","month","mtemp","mon","currentday","getDate","day","mday","hour","minute","templateHolder","find","removeClass","addClass","checked","is","prop","startyear","endyear","startmonth","endmonth","startday","endday","actualStart","actualEnd","$","each","key","push","id","fullname","summary","courseimage","name","renderData","Templates","renderPromise","bind","setActiveTemplate","setEnddate","validateDaysInMonth","test","text","getTime","templateid","selectedTemplate","category","starthour","startminute","endhour","endminute","args","categoryid","ajaxCall","methodname","fail","notification","exception","promise","ajax","call","response","hide","error","info","url","window","location","href"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport ajax from 'core/ajax';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport notification from 'core/notification';\nimport Templates from 'core/templates';\n\nconst TEMPLATES = {\n    MODAL_COURSE_ACTION_CONTENT: 'theme_urcourses_default/modal_course_action_content'\n};\n\nconst SELECTORS = {\n    COURSENAME: '#course_tools_coursename',\n    SHORTNAME: '#course_tools_shortname',\n    CATEGORY: '#course_tools_category',\n    MODALHOLDER: '#course_tools_modal_content',\n    STARTDAY: '#course_tools_start_day',\n    STARTMONTH: '#course_tools_start_month',\n    STARTYEAR: '#course_tools_start_year',\n    STARTHOUR: '#course_tools_start_hour',\n    STARTMINUTE: '#course_tools_start_minute',\n    ENDDAY: '#course_tools_end_day',\n    ENDMONTH: '#course_tools_end_month',\n    ENDYEAR: '#course_tools_end_year',\n    ENDHOUR: '#course_tools_end_hour',\n    ENDMINUTE: '#course_tools_end_minute',\n    ENDENABLE: '#course_tools_enddate_enabled',\n    ERR_COURSENAME: '#error_course_tools_coursename',\n    ERR_SHORTNAME: '#error_course_tools_shortname',\n    ERR_CATEGORY: '#error_course_tools_category',\n    ERR_START: '#error_course_tools_start',\n    ERR_END: '#error_course_tools_end',\n};\n\nexport default class courseActionsLib {\n    _courseid =0;\n    _coursename=\"\";\n    _shortname=\"\";\n    _startdate=\"\";\n    _enddate=\"\";\n    _templatelist = \"\";\n    _categories = \"\";\n    self ;\n\n    constructor(courseid,coursename, shortname, startdate, enddate, templatelist, categories){\n        \n        self = this;\n\n        self._courseid = courseid;\n        self._coursename = coursename;\n        self._shortname = shortname;\n        self._startdate = startdate;\n        self._enddate = enddate;\n        self._templatelist = templatelist;\n        self._categories = categories;\n    }\n    /**\n     * Used for new course and duplicate course creation on button clicks\n     */\n    async coursereqAction(_element,button,selectcatergory, selectstart, selectend) {\n                                                                                                                                         \n        var modaltitle = (_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course';\n        var modalaction = (_element.attr('id') == button) ? 'create a new' : 'duplicate this';\n\n        var templatenew = (_element.attr('id') == button) ? true : \"\";\n        var templateshort = (self._templatelist.length>6) ? \"\" : true;\n        var istemplatelist = (self._templatelist.length>0) ? true : \"\";\n\n        var template =  await self.render(TEMPLATES.MODAL_COURSE_ACTION_CONTENT, templatenew,templateshort,istemplatelist);\n\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: \"<p><b>Are you sure you want to \"+ modalaction +\" course?</b><br />\"\n                + ((_element.attr('id') == button) ? \"<small>Select from the templates below. (Scroll for more options)</small>\" : \"<small>Student data will not be included in the duplicated course.</small>\")\n                + template\n                + \"</p>\"\n        }).then(function(modal) {\n\n            modal.setSaveButtonText((_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course');\n            var root = modal.getRoot();\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n                \n            if((_element.attr('id') == button)){\n                root.on(ModalEvents.save, function(e){\n                    if(!self.validate()){\n                        e.preventDefault();   \n                    }else{\n                        self.createCourse( );\n                    }    \n                });\n            }else{\n                root.on(ModalEvents.save, function(e){\n                    if(!self.validate()){\n                        e.preventDefault();   \n                    }else{\n                        self.duplicateCourse( );\n                    }\n                });\n            }\n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(){\n                //remove inputs otherwise duplicates are made causing id problems\n                $(SELECTORS.MODALHOLDER).remove();\n            });\n\n            modal.show();\n        }).done(function() {\n            if((_element.attr('id') == button)){\n                self.registerSelectorEventListeners(_element, button);\n            }else{\n                 $(SELECTORS.COURSENAME).val(self._coursename+\" (Copy)\");\n                 $(SELECTORS.SHORTNAME).val(self._shortname+\" (Copy)\");\n            }\n\n            self.populateDateSelects(selectstart,selectend);\n\n            //change category to that of course  \n            $(SELECTORS.CATEGORY).val(selectcatergory);\n                \n            self.registerDateEventListeners(_element);\n        });\n    }\n\n    /**\n     * Switch choosen template based on click in template list\n     */\n    populateDateSelects(selectstart, selectend) {\n\n          //populate start and end dates\n          var currentyear = (new Date()).getFullYear();\n          for (var year = 1900; year < currentyear+30; year++) {\n              $(SELECTORS.STARTYEAR).append('<option  value=\"'+year+'\" '+ ((year == selectstart.year) ? \"selected\": \" \" ) +'>' + year + '</option>');\n              $(SELECTORS.ENDYEAR).append('<option value=\"'+year+'\"'+(((year == selectend.year && selectend.year >= selectstart.year) || (year == currentyear && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>' + year + '</option>');\n          }\n\n          var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n          var currentmonth = (new Date()).getMonth();\n          for (var month = 0; month < monthNames.length; month++) {\n              var mtemp = month;\n              mtemp++;\n              $(SELECTORS.STARTMONTH).append('<option value=\"'+mtemp+'\" '+((mtemp == selectstart.mon) ? \"selected\": \" \" )+'>' + monthNames[month] + '</option>');\n              $(SELECTORS.ENDMONTH).append('<option value=\"'+mtemp+'\" '+(((mtemp == selectend.mon && selectend.year >= selectstart.year) || (month == currentmonth && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>' + monthNames[month] + '</option>');\n          }\n\n          var currentday = (new Date()).getDate();\n          for (var day = 1; day < 32; day++) {\n              $(SELECTORS.STARTDAY).append('<option value=\"'+day+'\" '+((day == selectstart.mday) ? \"selected\": \" \" )+'>' + day + '</option>');\n              $(SELECTORS.ENDDAY).append('<option value=\"'+day+'\" '+(((day == selectend.mday && selectend.year >= selectstart.year) || (day == currentday && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>' + day + '</option>');\n          }\n\n          for (var hour = 0; hour < 24; hour++) { \n              $(SELECTORS.STARTHOUR).append('<option value=\"'+hour+'\">' + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n              $(SELECTORS.ENDHOUR).append('<option value=\"'+hour+'\">' + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n          }\n          \n          for (var minute = 0; minute < 61; minute++) {\n              $(SELECTORS.STARTMINUTE).append('<option value=\"'+minute+'\"    >' + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n              $(SELECTORS.ENDMINUTE).append('<option  value=\"'+minute+'\"  >' + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n          }\n    }  \n    \n    /**\n     * Switch choosen template based on click in template list\n     */\n    setActiveTemplate(e) {\n\n        var templateHolder = $('div[data-role=\"templateholder\"');\n        $(templateHolder).find('.active').removeClass(\"active\");\n        e.addClass(\"active\");\n    }\n    /**\n     * Switch choosen template based on click in template list\n     */\n    setEnddate(e) {\n\n        var checked;\n        (e.is(\":checked\")) ? checked=false: checked=true;\n        $(SELECTORS.ENDDAY).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMONTH).prop(\"disabled\", checked);\n        $(SELECTORS.ENDYEAR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDHOUR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMINUTE).prop(\"disabled\", checked);\n    } \n    \n    /**\n     * Switch choosen template based on click in template list\n     */\n    validateDaysInMonth () { \n\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n\n        var actualStart = new Date(startyear, startmonth, 0).getDate();\n        var actualEnd = new Date(endyear, endmonth, 0).getDate();\n\n        if(actualStart < startday){\n            $(SELECTORS.STARTDAY).val(actualStart);\n        }\n        if(actualEnd < endday){\n            $(SELECTORS.ENDDAY).val(actualEnd);\n        }\n    }\n\n    /**\n     * Update the modal body using given template and data.\n     *\n     * @method render\n     * @param {String} template - The name of the template to render.\n     * @param {Object} data - Data for template.\n     * @param {Object} breadcrumbData - Data required for rending breadcrumbs.\n     */\n     async render(template,templatenew,templateshort, istemplatelist) {\n\n        var templatelist = [];\n        $.each(self._templatelist, function(key,val) {\n            templatelist.push({\"id\":val.id,\"fullname\":val.fullname,\"summary\":val.summary, \"courseimage\": val.courseimage});\n        });\n\n\n        var categories = [];\n        $.each(self._categories, function(key,val) {\n            categories.push({\"id\":val.id,\"name\":val.name});\n        });\n        const renderData = {\n            templatenew: templatenew,\n            templateshort: templateshort,\n            templatelist:templatelist,\n            istemplatelist:istemplatelist,\n            categories: categories\n        };\n        const renderPromise = await Templates.render(template, renderData);\n        return renderPromise;\n    }\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerSelectorEventListeners (_element, button) {\n\n        if(_element.attr('id') == button && self._templatelist.length<=6){\n            //set event listners for template options\n            $('.tmpl-label').bind('click', function() { self.setActiveTemplate($(this)); } );\n        }\n    }\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerDateEventListeners (_element) {\n        //set event listners for template options\n        $(SELECTORS.ENDENABLE).bind('click', function() { self.setEnddate($(this)); } );\n        $(SELECTORS.ENDMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.ENDDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n    }\n\n    /**\n     * For Duplicate and Create course.\n     * Validate if course name and shortname have been entered\n     */\n     validate() {\n\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n   \n        var test =true; \n        if(coursename.length ==0){\n            $(SELECTORS.ERR_COURSENAME).text(\"Please enter a name for the course\");\n            $(SELECTORS.ERR_COURSENAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_COURSENAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_COURSENAME).text(\"\");\n        }\n\n        if(shortname.length ==0){\n            $(SELECTORS.ERR_SHORTNAME).text(\"Please enter a short name for the course\");\n            $(SELECTORS.ERR_SHORTNAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_SHORTNAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_SHORTNAME).text(\"\");\n        }\n\n        var startdate = new Date(startyear+\".\"+startmonth+\".\"+startday).getTime()/1000;\n        var enddate = new Date(endyear+\".\"+endmonth+\".\"+endday).getTime()/1000;\n      \n        if(enddate < startdate && $(SELECTORS.ENDENABLE).is(\":checked\") ){\n            $(SELECTORS.ERR_START).text(\"Course end date can not be before start date\");\n            $(SELECTORS.ERR_START).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_START).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_START).text(\"\");\n            $(SELECTORS.ERR_END).text(\"\");\n        }\n\n        return test;\n    }\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    createCourse() {\n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n        \n        if(self._templatelist.length>6){\n            var templateid = $('#templateselect').val();\n        }else{\n            var templateHolder = $('div[data-role=\"templateholder\"');\n            var selectedTemplate = $(templateHolder).find('.active')\n            var templateid = $(selectedTemplate).attr('id');\n        }\n\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n        var enddate = \"0\";\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n        \n        if($('#mainspinner').length){\n            $('#mainspinner') .show();\n            $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n        }\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            templateid: templateid,    \n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_create_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            if($('#mainspinner').length){\n                $('#mainspinner') .hide();\n                $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            }\n\n            if(response.error!=\"\"){\n\n                title = \"ERROR:\"\n                info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                window.location.href = response.url;\n            }\n        }).fail(function(ex) {\n            notification.exception;\n        });  \n    }\n\n     /**\n     * After modal info has been entered call ajax request\n     */\n      duplicateCourse() {\n        \n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n        var enddate = \"0\";\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n\n        if($('#mainspinner').length){\n            $('#mainspinner') .show();\n            $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n        }\n         \n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_duplicate_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            if($('#mainspinner').length){\n                $('#mainspinner') .hide();\n                $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            }\n            if(response.error!=\"\"){\n\n                title = \"ERROR:\"\n                info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                 window.location.href = response.url;\n            }\n        }).fail(function() {\n            notification.exception;\n        });  \n    }\n}\n\n"],"file":"course_actions.min.js"}